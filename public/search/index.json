[{"content":"æŒ‰è½»åº¦ä½¿ç”¨å’Œé‡åº¦ä½¿ç”¨åˆ†æ¨èã€‚æ¯ç§å°±æ¨èä¸¤ä¸‰ä¸ªï¼Œéœ€è¦å…¶ä»–çš„å¯ä»¥å‚è€ƒæ¯’è¯çš„å¸–å­ğŸ‘‰é“¾æ¥ã€‚\næç®€æ€»ç»“ï¼š\nğŸ”¥å°é²œå¶ç”¨ï¼Œé¢„ç®—è¾ƒä½ï¼šä¸€å…ƒæœºåœºï¼Œä¸€ä¸ªæœˆä¸åˆ°1å—é’± ğŸ”¥é‡åº¦ä¾èµ–ï¼Œæµåª’è§£é”ï¼šTAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é” # è½»åº¦ä½¿ç”¨ é¢„ç®—ä½ï¼Œèˆä¸å¾—åœ¨è¿™æ–¹é¢å¤§æ”¯å‡º å¤‡ç”¨æœºåœºé˜²å¤±è” æµ·æ·˜ã€è°·æ­Œ å¶å°”çœ‹çœ‹ Youtube ç­‰è§†é¢‘ Telegram èŠå¤© åŸºæœ¬æ²¡æœ‰é€Ÿåº¦å’Œæ—¶å»¶è¦æ±‚ # ä¸€å…ƒæœºåœºğŸ”¥ å®˜ç½‘ï¼šğŸ‘‰é“¾æ¥ğŸš€\nåè®®ï¼šTrojan\nç‰¹ç‚¹ï¼šå»‰ä»·ï¼Œæµé‡é«˜ï¼Œé€Ÿåº¦è¿˜è¡Œï¼Œä½†æ˜¯ä¸å¤ªç¨³å®šã€‚\næœ‰ç‚¹å°åæ°”çš„ä½ä»·æœºåœºï¼Œä¸»æ‰“çš„å°±æ˜¯ä¸€ä¸ªä»·æ ¼ä½ã€‚æ™šé«˜å³°ä¼šæœ‰ç‚¹å¡ï¼Œç¨³å®šæ€§ä¹Ÿä¸ç®—é«˜ï¼Œä¸è¿‡ 12CNY/Yearã€20CNY/2Year çš„ä»·æ ¼è¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼Œä¸»è¦æ˜¯é€Ÿåº¦ä¹Ÿè¿˜è¡Œï¼Œè§£é” Netflix å’Œ Disney+ï¼Œç¾å›½èŠ‚ç‚¹è§£é” ChatGPTã€‚\nä»–å®¶å°±ä¹°è¿™ä¸ªä¼ å®¶å®å¥—é¤å°±è¡Œäº†ï¼Œå½“ç„¶å…¶ä»–å¥—é¤ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡ä¸ªäººè§‰å¾—æ„ä¹‰ä¸å¤§ã€‚\nèŠ‚ç‚¹ä»¥é¦™æ¸¯ã€æ—¥æœ¬ã€ç¾å›½ã€æ–°åŠ å¡ä¸ºä¸»ï¼Œå¶å°”ä¼šå‡ºç°åœŸè€³å…¶ç­‰ç‰¹åˆ«çš„èŠ‚ç‚¹ã€‚\n# ä¸‰åˆ†æœºåœº å®˜ç½‘ï¼šğŸ‘‰é“¾æ¥ğŸš€\nåè®®ï¼šVMESS\nç‰¹ç‚¹ï¼šå»‰ä»·ï¼Œæµé‡è¾ƒå°‘ï¼Œé€Ÿåº¦è¿˜è¡Œï¼Œç¨³å®šæ€§ä¸€èˆ¬ï¼Œç›¸å¯¹å°ä¼—ä¸€ç‚¹ã€‚\nå’Œä¸Šé¢ç±»ä¼¼ï¼Œä¹Ÿæ˜¯é ä½ä»·èµ·å®¶çš„ï¼Œåæ¥ä¹Ÿæ¨å‡ºäº†é«˜çº§å¥—é¤ï¼Œä¸è¿‡ä¹°è´µçš„å¹²å˜›ä¹°ä»–å®¶ã€‚9.5CNY/Year çš„ä»·æ ¼ï¼ŒVIP1-200G æ¯æœˆ-å¹´ä»˜å¥—é¤ï¼Œå¤§æ¦‚æ¯å¤© 3 åˆ†é’±ï¼Œæœºåœºåå­—åº”è¯¥ä¹Ÿæ˜¯è¿™ä¹ˆæ¥çš„ï¼Œä¹°ä¸ªéšä¾¿ç©ç©è¿˜æ˜¯å¯ä»¥çš„ã€‚\nç‰¹åˆ«æ³¨æ„ï¼Œå¥—é¤é‡Œæœ‰ä¸ªå°å­—è¯´æ˜ï¼Œç¦å»ºç¦å·ã€æ³‰å·ã€æ²³å—å¤§éƒ¨åˆ†åœ°åŒºæ­¤å¥—é¤å¯èƒ½æ— æ³•ä½¿ï¼Œè¿™äº›åœ°åŒºçš„å°ä¼™ä¼´è°¨æ…è´­ä¹°ã€‚\nç›®å‰èŠ‚ç‚¹åŒ…æ‹¬é¦™æ¸¯ã€æ—¥æœ¬ã€ç¾å›½ã€æ–°åŠ å¡ã€å°æ¹¾ã€‚\nå®˜æ–¹é¢‘é“æµ‹é€Ÿå¦‚ä¸‹ï¼š\né¢å¤–æä¸€ä¸‹ä¸­è½¬å¥—é¤ï¼ŒèŠ‚ç‚¹è¾ƒå°‘ï¼Œç”±äºè¿‘æœŸåˆšæ¨å‡ºï¼ŒçŒœæµ‹åº”è¯¥ä¼šä¸é”™ï¼Œä»·æ ¼å®æƒ ï¼Œ14.50CNY/æœˆä»˜ï¼Œæµé‡300G/æœˆï¼Œå¯ä»¥è¯•è¯•ã€‚æ²¡æ‰¾åˆ°æµ‹é€Ÿå›¾ï¼Œè´´ä¸€å¼ èŠ‚ç‚¹å›¾ç»™å¤§å®¶å‚è€ƒã€‚\n# é‡åº¦ä½¿ç”¨ ä¸åœ¨ä¹ä»·æ ¼ Netflixã€Disney+ ç­‰æµåª’ä½“é‡åº¦ä¾èµ– é•¿æœŸçœ‹ä¸èƒ½ç›´è¿çš„ Emby å…¬ç›Šæœ Telegram ä¸Šçœ‹è§†é¢‘ åŠå…¬å¼ºä¾èµ– è¿½æ±‚ç¨³å®šæ€§ é«˜é€Ÿå’Œä½æ—¶å»¶è¦æ±‚ # TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ğŸ”¥ å®˜ç½‘ï¼šğŸ‘‰é“¾æ¥ğŸš€\nåè®®ï¼šShadowsocks\nç‰¹ç‚¹ï¼šæ¯”è¾ƒè´µï¼ŒèŠ‚ç‚¹è¦†ç›–é¢å¹¿ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œç¨³å®šã€‚\nä»¥å‰çš„ AcÂ­celÂ­erÂ­aÂ­torï¼Œçº¿è·¯ç°åœ¨æ˜¯å…¨ BGP-IEPL å¹¿æ¸¯ + BGP-IEPL æ²ªæ—¥ä¸­è½¬ï¼Œå…¨çƒ90+å›½å®¶åœ°åŒºèŠ‚ç‚¹ï¼Œåœ°åŒºè¦†ç›–èŒƒå›´ç›®å‰åº”è¯¥æ˜¯æœ€å¹¿çš„ã€‚\nåŒæ ·çš„ï¼ŒNetflixã€Disney+ ç­‰æµåª’ä½“ï¼Œè¯¥è§£é”çš„éƒ½è§£é”äº†ï¼ŒChatGPT ä¹Ÿæ˜¯ã€‚\nä»–å®¶æœ‰ä¸€ä¸ªç‰¹åˆ«å¥—é¤ï¼Œ154CNY/Yearï¼Œæ€»å…±200Gæµé‡ï¼Œç”¨ä½œå¤‡ç”¨é˜²å¤±è”ç‰¹åˆ«å¥½ï¼Œæˆ–è€…éœ€è¦ä¸€äº›ç½•è§åœ°åŒºçš„æ—¶å€™ã€‚\nå…¶ä»–å¥—é¤ä»·æ ¼å¦‚ä¸‹ï¼š\næ¯’è¯çš„ç”µä¿¡æµ‹é€Ÿï¼Œå¯ä»¥å‚è€ƒä¸‹ã€‚\n# Nexitally å®˜ç½‘1ï¼šğŸ‘‰é“¾æ¥ğŸš€\nå®˜ç½‘2ï¼šğŸ‘‰é“¾æ¥ğŸš€\nåè®®ï¼šShadowsocks, Trojan\nç‰¹ç‚¹ï¼šæ˜‚è´µï¼Œç¨³å®šï¼Œæµé‡è¿˜è¡Œï¼Œé€Ÿåº¦å¿«ï¼Œæ™šé«˜å³°ä¹Ÿç¨³å®šæœ‰é€Ÿåº¦ã€‚PS: æœ€è¿‘ç¨å¾®æœ‰ç‚¹ä¸ç¨³å®šï¼Œä¸çŸ¥é“æœºåœºåœ¨æŠ˜è…¾å•¥ï¼Œå»ºè®®ç¨å¾®è§‚æœ›ä¸‹ã€‚\nå®˜ç½‘æ‰“ä¸å¼€çš„è¯å…ˆæŒ‚ä¸ªåˆ«çš„ä»£ç†ã€‚\næ¯’è¯æ¨èä¸­çš„ç¬¬ä¸€åï¼Œä½©å¥‡å®¶ä¸­è½¬çº¿è·¯çš„é«˜ç«¯æœºåœºï¼Œæˆç«‹å¤§æ¦‚ä¸‰å¹´å¤šã€‚ç¨³å®šæ€§å’Œé€Ÿåº¦éƒ½ä¸é”™ï¼Œä»·æ ¼é«˜ï¼Œä½†æ˜¯å¯¹äºè¿½æ±‚ç¨³å®šæ€§çš„ç”¨æˆ·ä¹Ÿè¿˜å¥½ã€‚\nè¿™ä¹Ÿæ˜¯æˆ‘ä¸ªäººä¸»è¦ä½¿ç”¨çš„ï¼Œå·²ç»ä½¿ç”¨ä¸‰å¹´äº†ï¼Œç›®å‰åº”è¯¥æ˜¯ç¬¬å››å¹´ã€‚\nNetflixã€Disney+ ç­‰æµåª’ä½“ï¼Œè¯¥è§£é”çš„éƒ½è§£é”äº†ï¼ŒChatGPT ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ç”¨çš„ã€‚\næœ‰è‡ªå·±çš„å‚»ç“œå®¢æˆ·ç«¯ï¼Œå¯ä»¥ç™»å½•åä¸€é”®è¿æ¥ã€‚\nå¥—é¤æƒ…å†µï¼š\nSmart Accessï¼šæ¯æœˆ 500G æµé‡ï¼Œçº¦ 117CNY/Monthï¼Œçº¦ 606CNY/Yearï¼Œçº¦ 1102CNY/Year Smart Access Airï¼šæ¯æœˆ 200G æµé‡ï¼Œä»·æ ¼æ˜¯ Smart Access çš„ä¸€åŠå¤šç‚¹ï¼Œä½†æ˜¯é™é‡æä¾›ï¼Œèƒ½ä¸èƒ½ä¹°åˆ°çœ‹ç¼˜åˆ†ï¼Œä¹°åˆ°åå¯ä»¥ä¸€ç›´ç»­è´¹ æ¯’è¯çš„ç”µä¿¡æµ‹é€Ÿï¼Œå¯ä»¥å‚è€ƒä¸‹ã€‚\n# TLS å®˜ç½‘ï¼šğŸ‘‰é“¾æ¥ğŸš€\nåè®®ï¼šShadowsocks\nç‰¹ç‚¹ï¼šä¸­é«˜çº§å¥—é¤é™„å¸¦Embyï¼Œä»·æ ¼é€‚ä¸­ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œç›¸å¯¹ç¨³å®šã€‚PS: Emby æœåŠ¡é«˜æ¸…èµ„æºå·²ç»æ¢å¤äº†ï¼Œ4Kè¿˜æ²¡æœ‰ï¼Œæ„Ÿè§‰åŠæ‘†çƒ‚äº†Â·Â·Â·Â·Â·Â·\næœ€å¤§çš„ç‰¹è‰²æ˜¯é«˜çº§å¥—é¤é™„å¸¦ Emby æœåŠ¡ï¼Œå¹¶ä¸”ç›´è¿ Emby çš„é€Ÿåº¦ä¹Ÿæ˜¯ä¸é”™çš„ï¼Œä¸éœ€è¦æ¢¯å­å°±èƒ½ç›´æ¥çœ‹ã€‚å½±è§†åº“æ›´æ–°é€Ÿåº¦ä¹ŸæŒºå¿«ï¼Œæœ€æ–°ç”µè§†å‰§é›†åŸºæœ¬ç¬¬äºŒå¤©å°±ä¸Šäº†ã€‚\nå¥—é¤é™¤äº†æœºåœºé€ Emby å¤–ï¼Œä¹Ÿå•ç‹¬æä¾›äº† Emby å¥—é¤ã€‚\nç›¸å¯¹å°ä¼—ä¸€ç‚¹ï¼Œå®¢æœæ€åº¦ä¹Ÿå¾ˆå¥½ï¼Œä»·æ ¼ä¸ Nexitally å’Œ TAG ç›¸æ¯”è¦ä½ä¸€ç‚¹ã€‚\næµ‹é€Ÿå¦‚ä¸‹ï¼š\n# æœ€å å¯¹äºåˆšæ¥è§¦ç§‘å­¦ä¸Šç½‘çš„æœ‹å‹ï¼Œå»ºè®®å…ˆä¹°å»‰ä»·çš„æ¢¯å­è¯•è¯•ï¼Œç¡®è®¤è‡ªå·±æ˜¯å¦æœ‰ç§‘å­¦ä¸Šç½‘çš„éœ€æ±‚ã€ç§‘å­¦ä¸Šç½‘çš„ä¾èµ–åº¦æœ‰å¤šå¤§ï¼Œç„¶åå†è€ƒè™‘æ¢é«˜ä»·ç¨³å®šçš„æ¢¯å­ã€‚\nå¯¹äºæµ·æ·˜åªçœ‹çœ‹å•†å“ä¸äº²è‡ªè´­ä¹°çš„æœ‹å‹ï¼Œä¸€å…ƒæœºåœºã€ä¸‰åˆ†æœºåœºè¿™ç§å®Œå…¨å¤Ÿç”¨ï¼Œåˆ«ä¿¡æµ·æ·˜ç¾¤é‡Œé‚£ç§å€’å–çš„ï¼Œè¯´ä¸å®šå–ç»™ä½ çš„ä¹Ÿæ˜¯è¿™ç§ã€‚\n","date":"2024-02-28T09:24:13+08:00","image":"http://localhost:1313/p/2024/02/airport-recommend/cover_hu0b647b632483cbc2493cff89a71f6b1e_99619_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/2024/02/airport-recommend/","title":"æœºåœº/æ¢¯å­æ¨è"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\nğŸ‘‰ é¦–å…ˆæ¨å¹¿ä¸‹è‡ªå·±ç¼–è¯‘çš„ OpenWrt æ—è·¯ç”±æç®€ç‰ˆï¼Œä¸“ä¸ºæ—è·¯ç”±è€Œåˆ¶ä½œã€‚ ğŸ‘ğŸ‘ğŸ‘\nç¼–è¯‘è„šæœ¬ä»¥åŠä¸ªäººä¿®æ”¹çš„ç»„ä»¶ä¾èµ–å…¨å¼€æºï¼ŒGithub Actions åœ¨çº¿ç¼–è¯‘ï¼Œå®‰å…¨å¯é æ— åé—¨ã€‚ åŸºäº lede æºç  é»˜è®¤é…ç½® DHCPv6 Client æ¥å£ lan6ã€‚ é»˜è®¤é…ç½®å¥½äº† AdGuardHome ã€ mosdns å’Œ openclash ï¼ˆæˆ– ssrp ï¼‰çš„æ­é…è¿è¡Œé…ç½®ã€‚ openclash é¢„ç½® clash_meta å†…æ ¸ã€‚ mosdns ä½¿ç”¨äº† è‡ªå·±çš„ä¿®æ”¹ç‰ˆï¼Œæ”¯æŒ MMDB GeoIP åŒ¹é…ã€‚ ç‰ˆæœ¬ è¯´æ˜ ä¸‹è½½åœ°å€ x86 åŒ…å« ssrp å’Œ openclashï¼Œè¯¦ç»†è¯´æ˜ ä¸‹è½½ x86 openclash ä¸“ç‰ˆ ä»…åŒ…å« openclashï¼Œè¯¦ç»†è¯´æ˜ ä¸‹è½½ r2s åŒ…å« ssrp å’Œ openclashï¼Œè¯¦ç»†è¯´æ˜ ä¸‹è½½ n1 åŒ…å« ssrp å’Œ openclashï¼Œè¯¦ç»†è¯´æ˜ ä¸‹è½½ # å‰è¨€ CNç½‘ç»œçš„é˜»æ–­æ–¹å¼ä¸»è¦æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼š\nGFW é˜»æ–­ DNS æ±¡æŸ“ GFW é˜»æ–­å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è¢«å¢™äº†ï¼Œå³ä½¿æ˜¯DNSæ²¡æœ‰è¢«æ±¡æŸ“ï¼Œä¹Ÿæ— æ³•è®¿é—®åˆ°ã€‚\nDNS æ±¡æŸ“å³è®©ä½ è®¿é—®ç½‘ç«™æ—¶ï¼Œæ— æ³•è·å¾—åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œä»è€Œå¯¼è‡´æ— æ³•è®¿é—®åˆ°ç½‘ç«™ã€‚DNS æ±¡æŸ“åœ¨ç§»åŠ¨å®½å¸¦ä¸­å°¤ä¸ºå…¸å‹ï¼Œå³ä½¿è‡ªå®šä¹‰äº†DNS æœåŠ¡å™¨ï¼Œä¹Ÿä¼šè¢«æ‹¦æˆªæ±¡æŸ“ã€‚\nè¦å®ç°ç§‘å­¦ä¸Šç½‘ï¼Œå¿…é¡»åŒæ—¶è§£å†³GFW é˜»æ–­å’ŒDNS æ±¡æŸ“ï¼Œå¹¶ä¸”ä¸¤è€…é…åˆä»¥æé«˜ç½‘ç»œè®¿é—®ä½“éªŒã€‚\nä»£ç†ä¸­çš„DNSçŸ¥è¯†ï¼Œå¯ä»¥å‚è€ƒ Sukka çš„è¿™ç¯‡æ–‡ç« ã€Šæµ…è°ˆåœ¨ä»£ç†ç¯å¢ƒä¸­çš„ DNS è§£æè¡Œä¸ºã€‹\n# è·¯ç”±å™¨ç§‘å­¦ä¸Šç½‘å’Œç»ˆç«¯ç§‘å­¦ä¸Šç½‘çš„åŒºåˆ« è·¯ç”±å™¨ä¸Šé…ç½®é€æ˜ä»£ç†ï¼Œå’Œåœ¨ç»ˆç«¯PCä¸Šç›´æ¥é€šè¿‡å®¢æˆ·ç«¯ï¼Œæœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ DNS è§£æã€‚\n# PCç»ˆç«¯ä¸Š é€šå¸¸æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤\nå¯åŠ¨å®¢æˆ·ç«¯ é€‰æ‹©å…¨å±€/è§„åˆ™æ¨¡å¼ é…ç½®ç³»ç»Ÿä»£ç†ï¼ˆä¸€èˆ¬å®¢æˆ·ç«¯è‡ªåŠ¨é…ç½®ï¼‰ï¼ŒæŠŠç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯ä½œä¸ºç³»ç»Ÿä»£ç†çš„ä¸Šæ¸¸ä»£ç†æœåŠ¡å™¨ ç¬¬3æ­¥é‡Œçš„é…ç½®ç³»ç»Ÿä»£ç†ï¼Œé€šå¸¸æœ‰httpå’Œsock5ä¸¤ç§ã€‚\næ­¤æ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼š\nå½“ä½¿ç”¨httpä»£ç†æ—¶ï¼Œæµè§ˆå™¨ä¸ä¼šåœ¨æœ¬åœ°è¿›è¡Œ DNS è§£æï¼Œè¯·æ±‚çš„åŸŸåä¼šä½œä¸º http æŠ¥æ–‡çš„ä¸€éƒ¨åˆ†ç›´æ¥å‘ç»™ä»£ç†æœåŠ¡å™¨ï¼ˆç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯ï¼‰ï¼ŒDNS å®Œå…¨åœ¨ä»£ç†æœåŠ¡å™¨ï¼ˆç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯ï¼‰ä¸Šå¤„ç†ã€‚\nå½“ä½¿ç”¨sock5ä»£ç†æ—¶ï¼Œsock5æ”¯æŒUDPï¼ŒDNS è§£æä¼šå°è£…åœ¨sock5ä¹‹ä¸­ï¼Œå‘ç»™ä»£ç†æœåŠ¡å™¨ï¼ˆç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯ï¼‰å¤„ç†ï¼Œæµè§ˆå™¨æ‹¿åˆ° IP åœ°å€åï¼Œåœ¨å‘èµ·è¿æ¥ã€‚\n# è·¯ç”±å™¨ä¸Šé…ç½®é€æ˜ä»£ç† æ­¤æ—¶ï¼Œç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯è¿è¡Œåœ¨è·¯ç”±å™¨ä¸Šï¼ŒPC ç»ˆç«¯æ˜¯çœ‹ä¸è§ä»£ç†çš„ï¼Œæ‰€ä»¥å«é€æ˜ä»£ç†ã€‚PC ç»ˆç«¯ä¸Šï¼Œè¯·æ±‚çš„å‘èµ·çš„æµç¨‹ç…§æ—§ï¼Œå…ˆè¿›è¡Œ DNS è§£æï¼Œæ‹¿åˆ° IP åå†å‘èµ·è¯·æ±‚ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºè·¯ç”±å™¨ä¸Šè¿è¡Œçš„ç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯æ¥è¯´ï¼ŒåŸŸåå’Œ IP æ˜¯ä¸¤ä¸ªè¯·æ±‚ï¼Œæœ‰çš„ä¼šå†…ç½® Mapping æœºåˆ¶ï¼ˆä¾‹å¦‚ Clashï¼‰ï¼Œç”¨æ¥è¿˜åŸ IP åˆ°åŸŸåã€‚\nè¿™ç§æƒ…å†µä¸‹ï¼Œä¼˜æƒ DNSé…ç½®å°±ç›¸å¯¹æ¯”è¾ƒé‡è¦äº†ï¼Œå¦åˆ™é’ˆå¯¹éƒ¨ç½²çš„CDNçš„ç½‘ç«™ä¸èƒ½åšåˆ°æœ€ä¼˜è®¿é—®ã€‚\n# æ­£æ–‡å¼€å§‹ï¼šé…ç½® \u0026amp; DNS ä¼˜åŒ– æœ¬æ–‡ä¸»è¦è€ƒè™‘çš„æ˜¯è‡ªç”±çš„å±€åŸŸç½‘ç¯å¢ƒï¼Œæ‰€ä»¥åªä»‹ç»è·¯ç”±å™¨ä¸Šç§‘å­¦ä¸Šç½‘é…ç½®ã€‚\né¦–å…ˆåˆ†æä¸‹è¦å®ç°çš„ç›®æ ‡ï¼š\nåŒæ ˆç½‘ç»œ å›½å†…ç½‘ç»œä½¿ç”¨ IPV4 \u0026amp; IPV6 åŒæ ˆ ç§‘å­¦ä¸Šç½‘ä»…ä½¿ç”¨ IPV4 å›½å†…å¤–åˆ†æµ DNSåˆ†æµ å›½å†…åŸŸåç”±å›½å†… DNS æœåŠ¡å™¨è§£æ å›½å¤–åŸŸåç»è¿‡ä»£ç†ç”±å›½å¤– DNS æœåŠ¡å™¨ # å›½å†…å¤–å’Œåº”ç”¨åˆ†æµ è¿™ä¸ªæ²¡å•¥å¥½å¤šè¯´çš„ï¼ŒæŒ‰æ–‡æ¡£é…ç½®è§„åˆ™å°±è¡Œã€‚ä¹Ÿå¯å‚è€ƒæ–‡æœ«ç»™å‡ºçš„ç¤ºä¾‹é…ç½®ã€‚\n# DNS ä¼˜åŒ–ç›®æ ‡ å¹¿å‘Šè¿‡æ»¤ï¼šä½¿ç”¨ AdGuardHome DNSåˆ†æµï¼šä½¿ç”¨ mosdns å…¶ä¸­ï¼Œå¢ƒå¤–ç½‘ç«™å±è”½ IPV6 åº”ç­” å¦‚æœä½¿ç”¨ openclashï¼ŒDNS å¿…é¡»ç»è¿‡ clash å†…æ ¸ï¼Œä»¥ä½¿ DNS å®Œæˆ IP \u0026lt;\u0026ndash;\u0026gt; Domain çš„ mapping PS: mosdns ä½¿ç”¨ alecthw ä¿®æ”¹ç‰ˆï¼Œæ”¯æŒ MMDB GeoIP åŒ¹é…\n# å¤šçº§ DNS çº§è” flowchart LR A[AdGuardHome, Port 53, no cache] -- ä¸»è¦ --\u0026gt; B[openclash, Port 5335] B --\u0026gt; C[mosdns, Port 7874] A -- å¤‡ç”¨\\né˜²æ­¢ openclash ä¸ºè¿è¡Œæ—¶ç½‘ç»œæ— æ³•è®¿é—® --\u0026gt; C é…ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š\nä¿®æ”¹äº† dnsmasq çš„é»˜è®¤ç«¯å£å·ï¼Œç”¨ AdGuardHome ç›‘å¬53ç«¯å£ä½œä¸ºé»˜è®¤çš„DNSè§£æã€‚ AdGuardHome å¯ä»¥ç›‘æ§çš„å„ä¸ªç»ˆç«¯çš„ DNS è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨å¹¿å‘Šè¿‡æ»¤å’Œç®¡æ§åŠŸèƒ½ã€‚ openclash ä½œä¸º AdGuardHome çš„ä¸Šæ¸¸ã€‚ mosdns ä½œä¸º AdGuardHome çš„ä¸Šæ¸¸å¤‡ç”¨æœåŠ¡å™¨ã€‚ openclash ä¸­æœ¬åœ° DNS åŠ«æŒè®¾ç½®ä¸ºåœç”¨ï¼Œå½“ openclash è¿è¡Œæ—¶ï¼Œopenclash ä½œä¸º AdGuardHome çš„ä¸Šæ¸¸ä¸»è¦æœåŠ¡å™¨ç”Ÿæ•ˆã€‚ openclash å¤å†™è®¾ç½®ä¸­ï¼Œå¯ç”¨è‡ªå®šä¹‰ä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼Œå¹¶æŒ‡å®š mosdns ä¸ºå”¯ä¸€ä¸Šæ¸¸ã€‚ å¦‚æ­¤ä¸€æ¥ï¼Œæœ€ç»ˆçš„ DNS è¯·æ±‚ç”± mosdns å‘å‡ºï¼Œè¯·æ±‚ä¼šç»è¿‡ openclash åˆ†æµï¼ŒæŒ‰è¯·æ±‚çš„ DNS æœåŠ¡å™¨ç›´è¿æˆ–èµ°ä»£ç†ã€‚DNS è¯·æ±‚æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š\nflowchart TB A((ç”µè„‘/æ‰‹æœº\\næµè§ˆå™¨)) -- DNS è¯·æ±‚ --\u0026gt; B[è·¯ç”±å™¨\\nAdGuardHome] B --\u0026gt; C[è·¯ç”±å™¨\\nopenclash DNS] C --\u0026gt; D[è·¯ç”±å™¨\\nmosdns] D --\u0026gt; E[è·¯ç”±å™¨\\nopenclash Proxy Client] E -- å›½å¤– DNS æœåŠ¡å™¨\\nå±è”½ipv6åº”ç­” --\u0026gt; F[æœåŠ¡å™¨\\nProxy Server] E -- å›½å†… DNS æœåŠ¡å™¨ --\u0026gt; N(Internet) F --\u0026gt; N å¦‚æ­¤ï¼Œä¾¿å®ç°äº†\nAdGuardHome çš„ç®¡æ§å’Œå¹¿å‘Šè¿‡æ»¤ mosdns åˆ†æµ DNSï¼Œå¹¶å±è”½éä¸­å›½å¤§é™† IP çš„ IPV6 åº”ç­” DNS ç»è¿‡ clash å†…æ ¸ï¼Œè¿åˆå…¶ mapping æœºåˆ¶ # é…ç½®ç¤ºä¾‹ å†æ¬¡æé†’ï¼Œæ–‡ç« å¼€å§‹å¤„çš„å›ºä»¶ï¼Œæ‰€æœ‰é…ç½®å·²å†…ç½®å“¦ï¼\n# dnsmasq # AdGuardHome # openclash æ³¨æ„åˆ é™¤é»˜è®¤çš„DNSé…ç½®ï¼Œä»…ä¿ç•™è¿™ä¸€ä¸ªå³å¯ã€‚\n# mosdns ä½¿ç”¨è‡ªå®šä¹‰é…ç½®ï¼Œç”±äºä½¿ç”¨äº† mmdb geoip åŒ¹é…ï¼Œmosdns å¿…é¡»ä½¿ç”¨ alecthw ä¿®æ”¹ç‰ˆã€‚\nPS: ä»¥ä¸‹é…ç½®ä¸­çš„cn-white.txtï¼Œæ¥è‡ªé¡¹ç›®chnlistï¼Œæˆ‘ç¼–è¯‘çš„å›ºä»¶å·²å†…ç½®å¹¶è®¾ç½®è‡ªåŠ¨æ›´æ–°ï¼Œå…¶ä»–å›ºä»¶éœ€è¦æ‰‹åŠ¨ä¸‹è½½ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 # ç™½åå•æ¨¡å¼ # ç™½åå• æˆ– å¢ƒå¤–æŸ¥è¯¢IPæ˜¯geoip:CNï¼Œèµ°å›½å†… log: level: info file: \u0026#34;/tmp/mosdns.log\u0026#34; plugins: # mmdb - tag: country type: mmdb args: file: \u0026#34;/etc/mosdns/rule/Country.mmdb\u0026#34; # cn ip - tag: whitelist type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/cn-white.txt\u0026#34; # å¹¿å‘ŠåŸŸååˆ—è¡¨ geosite:category-ads-all - tag: geosite_ads type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/reject-list.txt\u0026#34; # hosts - tag: hosts type: hosts args: entries: - \u0026#34;localhost 127.0.0.1\u0026#34; # ç¼“å­˜ - tag: cache type: cache args: size: 20480 lazy_cache_ttl: 86400 dump_file: \u0026#34;/etc/mosdns/cache.dump\u0026#34; dump_interval: 1800 # æŸ¥è¯¢å¢ƒå¤–DNS - tag: forward_global type: forward args: concurrent: 3 upstreams: - tag: Google_dot addr: \u0026#34;tls://8.8.4.4\u0026#34; enable_pipeline: true - tag: Quad9_dot addr: \u0026#34;tls://9.9.9.9\u0026#34; enable_pipeline: true - tag: Cloudflare_dot addr: \u0026#34;tls://1.0.0.1\u0026#34; enable_pipeline: true - tag: OpenDNS_dot addr: \u0026#34;tls://208.67.222.222\u0026#34; enable_pipeline: true # æŸ¥è¯¢å›½å†…DNS - tag: forward_china type: forward args: concurrent: 2 upstreams: - tag: Ali_dot addr: \u0026#34;tls://223.5.5.5\u0026#34; enable_pipeline: true - tag: DNSPod_dot addr: \u0026#34;tls://120.53.53.53\u0026#34; enable_pipeline: true # å¢ƒå¤–è§£æï¼Œä¼˜å…ˆIPV4 - tag: global_sequence type: sequence args: - matches: qname $whitelist exec: return - exec: prefer_ipv4 - exec: $forward_global - matches: resp_ip_mmdb $country CN exec: drop_resp # å›½å†…è§£æï¼Œä¸è®¾ç½®è¿‡æ»¤ï¼Œä½œä¸ºfallback - tag: china_sequence type: sequence args: - exec: $forward_china # å±è”½è§£æ - tag: reject_sequence type: sequence args: - matches: qname $geosite_ads exec: reject 3 - matches: qtype 12 exec: reject 3 # - matches: qtype 65 # exec: reject 3 # å¦‚æœ primary æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è¿”å›ä½†æ²¡æœ‰åº”ç­”ï¼Œæˆ–åœ¨ threshold æ¯«ç§’å†…æ— å“åº”ï¼Œåˆ™æ‰§è¡Œ secondaryã€‚ # æ‰€ä»¥åœ¨ primary ä¸­ä¸èƒ½ç”¨ rejcetï¼Œreject ä¹Ÿæ˜¯åº”ç­” # Fallback - tag: fallback type: fallback args: primary: global_sequence secondary: china_sequence threshold: 150 always_standby: true - tag: main_sequence type: sequence args: - exec: $reject_sequence - exec: $hosts - matches: has_resp exec: accept - exec: $cache - matches: has_resp exec: accept - exec: $fallback - matches: has_resp exec: ttl 10-600 - tag: udp_server type: udp_server args: entry: main_sequence listen: 0.0.0.0:5335 ","date":"2023-11-25T20:32:18+08:00","image":"http://localhost:1313/p/2023/11/fuck-gfw/cover_hu09960b07a1e185b48779a3adb570c92f_73138_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/2023/11/fuck-gfw/","title":"AdGuardHome + mosdns + openclash æ‰“é€ è‡ªç”±çš„å®¶åº­/åŠå…¬å®¤ç½‘ç»œ"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\n# ROS çš„ UPNP ç”±äº ROS çš„ UPNP åŠŸèƒ½æ²¡æœ‰è‡ªå¸¦ç±»ä¼¼é»‘ç™½åå•ç±»ä¼¼çš„åŠŸèƒ½ï¼Œé‚£åªèƒ½ä»é˜²ç«å¢™å…¥æ‰‹äº†ã€‚\nUPNP æœåŠ¡ç«¯æ¶‰åŠä¸¤ä¸ªç«¯å£ï¼Œ1900(UDP) å’Œ 2828(TCP)ã€‚é‚£ä¹ˆï¼Œç›®æ ‡å°±å¾ˆæ˜ç¡®äº†ï¼š\nå»ºä¸ªç™½åå• ä»…å…è®¸ç™½åå•å†…çš„ IP è®¿é—®è¿™ä¸¤ä¸ªç«¯å£ # é…ç½®è¿‡ç¨‹ # åˆ›å»ºä¸€ä¸ªåç§°ä¸º allow_upnp çš„åœ°å€åˆ—è¡¨ä½œç™½åå• 1 2 3 /ip firewall address-list add address=192.168.1.1 list=allow_upnp add address=192.168.1.2 list=allow_upnp # åˆ›å»ºä¸¤æ¡ filter è§„åˆ™ 1 2 3 /ip firewall filter add action=drop chain=input dst-port=1900 protocol=udp src-address-list=!allow_upnp add action=drop chain=input dst-port=2828 protocol=tcp src-address-list=!allow_upnp å¦‚æœåŸæ¥è§„åˆ™è¾ƒå¤šï¼Œæ³¨æ„ä¸‹æ”¾çš„ä½ç½®ã€‚\n# é‡å¯ä¸‹ UPNP æœåŠ¡ 1 2 3 /ip upnp set enabled=no set enabled=yes è¿™æ ·å°±é…ç½®å¥½äº†ï¼Œç­‰ä¸ªå‡ ä¸ªå°æ—¶çœ‹çœ‹ï¼ŒNAT åˆ—è¡¨é‡Œï¼Œé™¤äº†å…è®¸çš„å‡ ä¸ª IP æœ‰ UPNPï¼Œå…¶ä»–åº”è¯¥éƒ½æ²¡æœ‰ã€‚ä¸–ç•Œæ¸…å‡€äº†ã€‚\nå¦‚æœæœ‰é—®é¢˜ï¼Œä¼˜å…ˆæ£€æŸ¥ filter è§„åˆ™é¡ºåºã€‚\n# é™„ï¼šDHCP é™æ€è‡ªåŠ¨æ·»åŠ åˆ°åœ°å€åˆ—è¡¨ 1 2 /ip dhcp-server lease add address=192.168.1.x mac-address=xx:xx:xx:xx:xx:xx address-lists=allow_upnp ","date":"2024-02-26T20:11:45+08:00","image":"http://localhost:1313/p/2024/02/routeros-upnp-blcok/cover_huca83aa35fe84efa02b4aaf088221896b_32320_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/2024/02/routeros-upnp-blcok/","title":"RouterOS ç»™ UPNP è®¾ç½®ç™½åå•ï¼Œé¿å… APP ç™½å«–ä¸Šè¡Œå¸¦å®½"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\nğŸ‘‰ æ³¨å†Œ CloudDrive2 çš„æ—¶å€™å¯ä»¥å¡«ä¸Šæˆ‘çš„æ¨èç å“¦ï¼šcAR6b415ã€‚\næ ¸å¿ƒç‚¹ï¼š\nä½¿ç”¨ CloudDrive2 æŠŠäº‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°ã€‚ æ–°æ¬¾ CPU å¦‚æœæ²¡æœ‰ç¡¬è§£é€‰é¡¹ï¼Œå°±å®‰è£… beta ç‰ˆçš„ embyã€‚ PSï¼šä»¥ä¸‹ä½¿ç”¨çš„ESXi 8.0ï¼ŒåŸºäº Ubuntu 22.04 LTSï¼Œåœ¨ root ç”¨æˆ·ä¸‹æ“ä½œã€‚éœ€è¦æœ‰ç®€å•çš„ Linux åŸºç¡€çŸ¥è¯†ï¼Œä¾‹å¦‚äº†è§£ SSHã€VIM æ€ä¹ˆä½¿ç”¨ã€‚\nPSï¼šCloudDrive2 å’Œ Emby çš„éƒ½æ˜¯ä» Github ä¸‹è½½çš„ï¼Œè¿ä¸ä¸Š Github è‡ªè¡Œç§‘å­¦ä¸Šç½‘ã€‚\n# ESXi æ ¸æ˜¾ç›´é€š åŠ¡å¿…å…ˆåˆ›å»ºå¥½è™šæ‹Ÿæœºï¼Œå¹¶é…ç½®å¥½é™æ€ IP åœ°å€å’Œ SSHï¼ï¼ï¼\nç›´é€šå¹¶æ·»åŠ æ ¸æ˜¾åˆ°è™šæ‹Ÿæœºä¹‹åï¼ŒESXiç½‘é¡µä¸­ï¼Œè™šæ‹Ÿæœºçš„æ§åˆ¶å°å°†ä»€ä¹ˆä¹Ÿä¸æ˜¾ç¤ºäº†ã€‚å¦‚æœæ²¡æœ‰é…ç½® IP å’Œ SSHï¼Œåªèƒ½è¦ä¹ˆæŠŠè™šæ‹Ÿæœºæ ¸æ˜¾åˆ æ‰ï¼Œè¦ä¹ˆæœºå™¨ç›´æ¥è¿æ˜¾ç¤ºå™¨ã€‚\n# 1. æ‰“å¼€ ESXi SSH å¦‚å›¾æ‰€ç¤ºæ“ä½œã€‚å¼€å¯å®Œä½¿ç”¨å·¥å…·ç™»å½•ï¼Œä¾‹å¦‚ Puttyã€XShell ç­‰ã€‚\n# 2. ç¦ç”¨ ESXi æ˜¾å¡è°ƒç”¨ ç¦ç”¨åï¼Œæœºå™¨è¿æ¥æ˜¾ç¤ºå™¨å°†ä¸æ˜¾ç¤ºé»„é»‘è‰²æ§åˆ¶å°ã€‚\n1 2 3 4 5 # ç¦ç”¨ esxcli system settings kernel set -s vga -v FALSE # æŸ¥çœ‹é…ç½®ç»“æœ esxcli system settings kernel list -o \u0026#34;vga\u0026#34; æŸ¥å‡ºçš„ç»“æœå¦‚ä¸‹ï¼ŒConfigured æ˜¾ç¤º FALSE å³æˆåŠŸï¼Œç­‰ä¸€ä¼šå„¿é‡å¯å Runtime ä¼šå˜æˆ FALSEã€‚\n1 2 3 Name Type Configured Runtime Default Description ---- ---- ---------- ------- ------- ----------- vga Bool FALSE TRUE TRUE Enable/Disable VGA support. # 3. passthru.map å¢åŠ æ ¸æ˜¾ æŸ¥çœ‹æ ¸æ˜¾è®¾å¤‡ID\n1 2 # ç¦ç”¨ lspci -v | grep -A 2 VGA è¿”å›çš„ä¿¡æ¯å¦‚ä¸‹ï¼Œå…³æ³¨ä¸‹ç¬¬äºŒè¡Œã€‚\n1 2 0000:00:02.0 Display controller VGA compatible controller: Intel Corporation Alder Lake-S GT1 [UHD Graphics 770] Class 0300: 8086:5916 8086 æ˜¯ä¾›åº”å•† IDï¼Œè¿™é‡Œå°±æ˜¯ Intelï¼Œ5916 å°±æ˜¯ç¡¬ä»¶ IDã€‚è®°ä¸‹è¿™8ä¸ªå­—ç¬¦ï¼Œè¿™é‡Œä¸è¦ç…§æŠ„å“¦ï¼Œè¦ç”¨ä½ è‡ªå·±çš„ã€‚\nç”¨ vi ä¿®æ”¹ passthru.mapï¼Œåœ¨æœ€åæ·»åŠ \n1 2 # Intel VGA 8086 5916 d3d0 default ä¿å­˜ï¼Œé‡å¯ESXiä¸»æœºã€‚\n# 4. åˆ‡æ¢æ˜¾å¡ç›´é€š ESXi Web æ§åˆ¶å°ä¸‹\nåˆ‡æ¢æˆåŠŸåï¼Œç›´é€šæ˜¾ç¤ºä¸º æ´»åŠ¨ã€‚ESXi 7.x å’Œ ESXi 8.x æ˜¯ä¸éœ€è¦é‡å¯ä¸»æœºçš„ï¼ŒESXi 6.7 å¯èƒ½è¿˜éœ€è¦é‡å¯ä¸€æ¬¡ã€‚\n# 5. è™šæ‹Ÿæœºæ·»åŠ æ ¸æ˜¾ åˆ›å»ºè™šæ‹Ÿæœºçš„æ­¥éª¤ä¸å†èµ˜è¿°ã€‚\nç¼–è¾‘è™šæ‹Ÿæœº\nç¦ç”¨ CPU ä¸‹è™šæ‹ŸåŒ–ç›¸å…³çš„ä¸‰ä¸ªé…ç½®\nå†…å­˜ä¸‹ï¼Œå‹¾é€‰ é¢„ç•™æ‰€æœ‰å®¢æˆ·æœºå†…å­˜\næ·»åŠ  PCI è®¾å¤‡\nåœ¨ PCIè®¾å¤‡1ä¸­ï¼Œé€‰æ‹©ä½ çš„æ ¸æ˜¾ã€‚\nä¿å­˜ï¼Œå¯åŠ¨è™šæ‹Ÿæœºã€‚è¿™ä¸€æ¬¡å¯åŠ¨å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…ï¼Œç›´åˆ° SSH å¯ä»¥è¿æ¥ä¸Šè™šæ‹Ÿæœºã€‚\n# å®‰è£…é…ç½® CloudDrive2 åç»­è™šæ‹Ÿæœºä¸Šï¼Œéƒ½æ˜¯åœ¨ root ç”¨æˆ·ä¸‹æ“ä½œçš„ã€‚\n# 1. è™šæ‹Ÿæœºå‰ç½®é…ç½® 1 2 3 4 5 6 7 8 9 10 # åˆ‡æ¢åˆ° root ç”¨æˆ· sudo su # å®‰è£… vim apt update apt install -y vim # ç¦ç”¨é˜²ç«å¢™ systemctl stop ufw systemctl disable ufw # 2. å®‰è£… CloudDrive2 å®˜ç½‘ä¸‹è½½ Linux ç‰ˆæœ¬ï¼Œä½¿ç”¨ SFTP å®¢æˆ·ç«¯ï¼Œä¸Šä¼ åˆ°è™šæ‹Ÿæœºçš„ /opt ç›®å½•ä¸‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 # è¿›å…¥ /opt ç›®å½• cd /opt # åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œç»™åç»­æŒ‚è½½äº‘ç›˜ç”¨ mkdir /opt/mnt # è§£å‹ tar xzf clouddrive-2-linux-x86_64-*.tgz # æ›´å mv clouddrive-2-linux-x86_64-* clouddrive2 # 3. åˆ›å»º systemd service 1 vim /lib/systemd/system/clouddrive2.service å¡«å…¥ä»¥ä¸‹å†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description=clouddrive2 ConditionFileIsExecutable=/opt/clouddrive2/clouddrive After=network.target Wants=network.target [Service] Type=simple PIDFile=/var/run/clouddrive2.pid ExecStart=/opt/clouddrive2/clouddrive WorkingDirectory=/opt/clouddrive2 Restart=on-failure [Install] WantedBy=multi-user.target # 4. å¯åŠ¨ CloudDrive2 1 2 systemctl enable clouddrive2 systemctl start clouddrive2 # 5. ç½‘é¡µç™»é™†é…ç½® http://ip:19798/\næ³¨å†Œç™»å½•åç•Œé¢å¦‚ä¸‹\nç‚¹å‡»äº‘å›¾æ ‡æ·»åŠ ç½‘ç›˜ï¼Œç™»å½•æˆæƒã€‚\nCloudDrive2 å…è´¹ç‰ˆåŠŸèƒ½æœ‰é™åˆ¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ªäººç”¨æˆ·è¶³å¤Ÿä½¿ç”¨ã€‚å…·ä½“å¯å‚è€ƒä¸‹å›¾ï¼š\n# 6. æŒ‚è½½ç½‘ç›˜åˆ°æœ¬åœ° å·¦æ ‘é€‰æ‹©ä¸€ä¸ªç½‘ç›˜ï¼ˆä¹Ÿå¯ä»¥é€‰æ‹©å­ç›®å½•ï¼‰ï¼Œç„¶åç‚¹å‡» ç”µè„‘å›¾æ ‡ï¼Œå¼€å§‹æŒ‚è½½ï¼Œç•Œé¢å¦‚ä¸‹\nå¦‚æœé»˜è®¤çš„åç§°ä¸ºä¸­æ–‡ï¼Œå»ºè®®æ”¹æˆ è‹±æ–‡/æ•°å­—ï¼Œè¿™ä¸ªåç§°å°±æ˜¯æŒ‚è½½åï¼ŒLinux æœ¬åœ°çš„æ–‡ä»¶å¤¹åç§°ã€‚\nç‚¹å‡» é€‰æ‹©ï¼Œé€‰æ‹©æŒ‚è½½ç‚¹ï¼Œè¿™é‡Œé€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ /opt/mnt ç›®å½•\næŒ‚è½½æˆåŠŸåï¼Œå‘½ä»¤è¡Œçœ‹ä¸€ä¸‹è™šæ‹Ÿæœºçš„ç›®å½•ï¼Œè¿™é‡Œæˆ‘æŒ‚è½½äº† aliyun å’Œ 115ã€‚\n1 2 root@ubuntu-emby:~# ls /opt/mnt/ 115 aliyun # å®‰è£…é…ç½® Emby-Server æ³¨æ„ï¼šè¾ƒæ–°çš„CPUï¼Œå»ºè®®ä¸‹è½½ Beta ç‰ˆæœ¬ï¼Œå¦åˆ™ç¡¬è§£æ— æ³•é€‰æ‹© QuickSyncã€‚æˆ–è€…å…ˆå®‰è£…æ ‡å‡†ç‰ˆï¼Œå‘ç°ç¡¬è§£æ— æ³•é€‰æ‹© QuickSyncï¼Œå†è¦†ç›–å®‰è£… Beta ç‰ˆã€‚\n# 1. å®‰è£… Emby å®˜ç½‘ä¸‹è½½ ubuntu ç‰ˆæœ¬çš„ deb åŒ…ã€‚\nå®‰è£…\n1 dpkg -i emby-server-deb_*_amd64.deb å®‰è£…åå·²ç»è‡ªåŠ¨å¯ç”¨äº†ï¼Œå¯ä»¥å†æ‰§è¡Œä¸€éä»¥ä¸‹å‘½ä»¤ï¼Œé˜²æ­¢å¼€æœºè‡ªå¯æ²¡å¼€å¯ã€‚\n1 systemctl enable emby-server æŸ¥çœ‹è¿è¡ŒçŠ¶æ€\n1 systemctl status emby-server # 2. å¯åŠ¨é¡ºåº ç”±äºä½¿ç”¨äº† CloudDrive2 æŒ‚è½½äº‘ç›˜ï¼ŒæœŸæœ›çš„æ˜¯ CloudDrive2 è¦åœ¨ Emby ä¹‹å‰å¯åŠ¨ï¼Œæ‰èƒ½ä¿è¯ Emby æ­£å¸¸è¯»å–åˆ°ç½‘ç›˜å†…å®¹ï¼Œé¿å…æŠ¥é”™ã€‚\nç¼–è¾‘ emby çš„ service æ–‡ä»¶\n1 vim /lib/systemd/system/emby-server.service åœ¨ After=network.target åé¢ï¼Œå‡æ·»åŠ  clouddrive2.serviceï¼Œç„¶åå†æ·»åŠ ä¸€è¡Œ Wants=network.target clouddrive2.serviceï¼Œå¦‚ä¸‹\n1 2 3 4 5 [Unit] Description=Emby Server is a personal media server with apps on just about every device After=network.target clouddrive2.service Wants=network.target clouddrive2.service Â·Â·Â·Â·Â· é‡è½½å¹¶é‡å¯\n1 2 systemctl daemon-reload systemctl restart emby-server æ³¨æ„ï¼Œå‡çº§å®‰è£… emby åï¼Œè¿™ä¸ª service ä¼šè¢«è¦†ç›–æˆé»˜è®¤çš„ï¼Œéœ€è¦å†æ¬¡ä¿®æ”¹ã€‚\n# 3. é…ç½® Emby http://ip:8096/\nç™»å½•åæŒ‰ç…§æŒ‡å¼•é…ç½®å°±è¡Œäº†ï¼Œè¿™é‡Œç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œä¸èµ˜è¿°ã€‚\nåˆ›å»ºåª’ä½“åº“çš„æ—¶å€™ï¼Œæ–‡ä»¶å¤¹é€‰æ‹©é€šè¿‡ CloudDrive2 æŒ‚è½½åˆ°æœ¬åœ°çš„æ–‡ä»¶å¤¹å³å¯ã€‚ä¾‹å¦‚ï¼š\n# 4. Emby ç¡¬è§£ å¦‚ä¸‹å›¾ï¼Œå‹¾é€‰ QuickSyncï¼Œè°ƒæ•´é¡ºåºå³å¯ã€‚\nç„¶åï¼Œéšä¾¿æ‰¾ä¸ªè§†é¢‘æµ‹è¯•ä¸‹è½¬ç ï¼Œè°ƒæ•´ç ç‡ï¼Œæ‹–æ‹‰å¿«è¿›ç­‰ã€‚\n# 5. ç”µè§†ç›´æ’­ m3u ç›®å‰å¥½ç”¨çš„ç›´æ’­æºéƒ½æ˜¯ ipv6 çš„ï¼Œå¦‚æœæ­£ç¡®é…ç½®äº† ipv6ï¼Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ç›´æ’­æºå’ŒæŒ‡å—æ•°æ®åº“ã€‚\nç›´æ’­æºï¼šhttps://live.fanmingming.com/tv/m3u/ipv6.m3u XmlTVï¼šhttps://live.fanmingming.com/e.xml ","date":"2024-01-23T10:31:42+08:00","image":"http://localhost:1313/p/2024/01/emby-clouddrive2/cover_hu891594d144c5c83cc6811113b0fc29af_79812_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/2024/01/emby-clouddrive2/","title":"ESXi ç›´é€šæ ¸æ˜¾å¼€å¯ç¡¬è§£ï¼ŒEmby é…åˆ CloudDrive2 æŒ‚è½½äº‘ç›˜æ‰“é€ å®¶ç”¨çš„æµåª’ä½“"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\nå…³äºäº‘å›ºä»¶ç›¸å…³çš„èµ„æ–™ï¼Œè¯·å‚è€ƒ é™†ä¼Ÿå³°â€‹çš„çŸ¥ä¹ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚\nè¿‡ç¨‹æ˜¯å…¶å®å’Œç¡¬ä»¶ç¡¬ç›˜æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œåªä¸è¿‡æ˜¯ç”¨åŒæ ·çš„æ–¹å¼åˆ›å»ºè™šæ‹Ÿç£ç›˜ï¼Œç„¶ååœ¨ Hyper-V ä¸­å¯åŠ¨ã€‚\n# äº‘å›ºä»¶æ–‡ä»¶å‡†å¤‡ äº‘å›ºä»¶ï¼šr23942ï¼ˆv1.6.23942ï¼‰ Win11 L1 é•œåƒï¼šWindows 11 ä¸“ä¸šç‰ˆ L1åŸºæœ¬å®‰è£…é•œåƒ # è½¯ä»¶å‡†å¤‡ DiskGenius # å¼€å§‹åˆ¶ä½œ æ•´ä½“è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå…ˆåˆ›å»º vdhx è™šæ‹Ÿç£ç›˜ï¼Œç„¶åç”¨ DiskGenius åˆ†åŒºï¼Œæœ€åç„¶åå†æŠŠ Win11 L1 é•œåƒæ‹·è´åˆ° åˆ›å»ºçš„ vhdx ä¸­ï¼Œé…ç½®å¯åŠ¨é•œåƒå³å¯ã€‚\n# åˆ›å»º vdhx ä¸ºäº†ç®€å•ï¼Œè¿™é‡Œç»™å‡ºä½¿ç”¨ç£ç›˜ç®¡ç†å›¾å½¢ç•Œé¢çš„åˆ›å»ºæ­¥éª¤ã€‚\né¦–å…ˆæ‰“å¼€è®¡ç®—æœºç®¡ç†ï¼Œç„¶åç‚¹å‡»å·¦è¾¹çš„ç£ç›˜ç®¡ç†ã€‚\nå³é”®ï¼Œç‚¹å‡»åˆ›å»ºVHDã€‚\næŒ‰ä¸‹å›¾è¾“å…¥å¤§å†™å’Œé€‰æ‹©ï¼Œæ³¨æ„å¤§å°è¦å¤§äº 260Gï¼Œå…·ä½“åŸå› å‚è€ƒé™†å¤§çš„æ–‡ç« ã€‚\nåˆ›å»ºä¹‹åä¼šè‡ªåŠ¨æŒ‚è½½ã€‚\n# åˆ†åŒº 1 2 3 æ³¨æ„ï¼šæ“ä½œåƒä¸‡å°å¿ƒï¼Œä¸è¦é”™é€‰ç£ç›˜ï¼Œè®¤è¯æ ¸å¯¹ï¼Œé¿å…æ•°æ®ä¸¢å¤±ï¼Œæ•°æ®æ— ä»·ï¼ï¼ï¼ æ³¨æ„ï¼šæ“ä½œåƒä¸‡å°å¿ƒï¼Œä¸è¦é”™é€‰ç£ç›˜ï¼Œè®¤è¯æ ¸å¯¹ï¼Œé¿å…æ•°æ®ä¸¢å¤±ï¼Œæ•°æ®æ— ä»·ï¼ï¼ï¼ æ³¨æ„ï¼šæ“ä½œåƒä¸‡å°å¿ƒï¼Œä¸è¦é”™é€‰ç£ç›˜ï¼Œè®¤è¯æ ¸å¯¹ï¼Œé¿å…æ•°æ®ä¸¢å¤±ï¼Œæ•°æ®æ— ä»·ï¼ï¼ï¼ æ‰“å¼€ DiskGeniusï¼Œé€‰ä¸­åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿç£ç›˜ï¼Œç„¶åç‚¹å‡»å¿«é€Ÿåˆ†åŒºã€‚\næŒ‰ä¸‹å›¾é€‰æ‹©ï¼Œå·æ ‡è¾“å…¥ VDsï¼Œç‚¹å‡»ç¡®å®šã€‚\næ‰§è¡ŒæˆåŠŸå’Œï¼ŒVDs åº”è¯¥è¢«è‡ªåŠ¨åˆ†é…ç›˜ç¬¦æŒ‚è½½åˆ°ç³»ç»Ÿäº†ã€‚\nè¿˜éœ€è¦æŠŠ ESP åˆ†åŒºä¹ŸæŒ‚è½½åˆ°ç³»ç»Ÿï¼Œåªèƒ½åœ¨ DiskGenius ä¸­æ“ä½œã€‚\n# å¤åˆ¶æ–‡ä»¶ å°†äº‘å›ºä»¶è§£å‹åˆ° ESP åˆ†åŒºï¼Œå¦‚ä¸‹å›¾ï¼š\nå°†äº‘å›ºä»¶ä¸­çš„ vd.config æ‹·è´åˆ° VDs åˆ†åŒºä¸­ã€‚\nå†å°†ä¸‹è½½çš„ Windows 11 ä¸“ä¸šç‰ˆ L1åŸºæœ¬å®‰è£…é•œåƒï¼Œç›®å½• b1882792 ä¸­çš„ Windows11-22H2-Pro-L1.7z æ–‡ä»¶è§£å‹ï¼Œè§£å‹ååˆ é™¤åŸæ–‡ä»¶ Windows11-22H2-Pro-L1.7zã€‚\nç„¶åå°†ç›®å½• b1882792 æ‹·è´åˆ° VDs åˆ†åŒºä¸­ã€‚ç›®å½•ç»“æ„å¦‚ä¸‹ã€‚\n# åˆ†ç¦»VHD ï¼ˆå¯é€‰ï¼‰åœ¨ DiskGenius ä¸­åˆ é™¤ ESP åˆ†åŒºçš„ç›˜ç¬¦ã€‚\nåœ¨ç£ç›˜ç®¡ç†ä¸­ï¼Œå³é”®è™šæ‹Ÿç£ç›˜ï¼Œç‚¹å‡»åˆ†ç¦»VHDã€‚\nè‡³æ­¤ï¼ŒHypver-V ä¸Šçš„äº‘å›ºä»¶è™šæ‹Ÿç›˜å°±åšå¥½äº†ã€‚\n# åœ¨ Hyper-V ä¸­åˆ›å»ºè™šæ‹Ÿæœº æŒ‰å¦‚ä¸‹æ­¥éª¤åˆ›å»ºï¼Œé€‰æ‹©ç¬¬äºŒä»£ï¼Œè™šæ‹Ÿç£ç›˜é€‰æ‹©ä½¿ç”¨ç°æœ‰ã€‚\nåˆ›å»ºå®Œæˆåï¼Œåœ¨è™šæ‹Ÿæœºè®¾ç½®ä¸­ï¼Œç¦ç”¨å®‰å…¨å¯åŠ¨ã€‚\n# å¯åŠ¨è¿è¡Œ åŒå‡»è™šæ‹Ÿæœºï¼Œå¯åŠ¨è¿è¡Œã€‚\næ­¤æ—¶ï¼Œé¼ æ ‡å¯èƒ½æ— æ³•ä½¿ç”¨ï¼Œè¯·ä½¿ç”¨ Tabé”®ã€æ–¹å‘é”®å’Œå›è½¦é”®æ“ä½œã€‚\né¡ºåˆ©è¿›å…¥ç³»ç»Ÿã€‚\n# ä½¿ç”¨ WinNTSetup å¿«é€Ÿåˆ¶ä½œ Windows L0 é•œåƒ ä¸‹è½½ WinNTSetupã€‚\n# vhdx å‡†å¤‡ å‚è€ƒä¹‹å‰æ­¥éª¤ï¼Œå®Œæˆè™šæ‹Ÿç£ç›˜çš„åˆ›å»ºå’Œåˆ†åŒºã€‚\nåˆ›å»º vdhxï¼Œå¤§å°å»ºè®®70Gä»¥ä¸Šã€‚ åˆ†åŒºï¼Œå·æ ‡ä¸ç”¨æŒ‡å®šã€‚ # åˆ¶ä½œè¿‡ç¨‹ä¸­è‡ªåŠ¨ç¦ç”¨è™šæ‹Ÿç£ç›˜æ‰©å……åˆ°æœ€å¤§ åœ¨ç›®å½• WinNTSetup\\RegTweaks\\Win10 ä¸‹åˆ›å»º disable-vdisk-expand.regã€‚\nè¿™ä¸ªç›®å½•æ˜¯å®‰è£…è¿‡ç¨‹ä¸­ä¿®æ”¹æ³¨å†Œè¡¨çš„ï¼Œå¯ä»¥åˆ©ç”¨æ­¤ç‰¹æ€§é¢„ç½®å¾ˆå¤šé…ç½®ã€‚\n1 2 3 4 Windows Registry Editor Version 5.00 [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\FsDepends\\Parameters] \u0026#34;VirtualDiskExpandOnMount\u0026#34;=dword:00000004 # ä½¿ç”¨ WinNTSetup åˆ›å»º L0 é•œåƒ æ‰“å¼€ WinNTSetupã€‚\né€‰æ‹© Windows å®‰è£…é•œåƒ ISOï¼Œè¿™é‡Œä»¥ LSTC ä¸ºä¾‹ã€‚ å¼•å¯¼é©±åŠ¨å™¨é€‰æ‹©è™šæ‹Ÿç£ç›˜çš„ESPåˆ†åŒºï¼Œå°±æ˜¯ FAT32 300MB é‚£ä¸ªã€‚ ç³»ç»Ÿé©±åŠ¨å™¨é€‰æ‹©è™šæ‹Ÿç£ç›˜æœ€å¤§çš„é‚£ä¸ªåˆ†åŒºï¼ŒNTFS é‚£ä¸ªã€‚ ä¼˜åŒ–è°ƒæ•´é‡Œï¼Œæ³¨å†Œè¡¨è°ƒæ•´é€‰æ‹©Win10ï¼Œå…¶ä½™é€‰é¡¹æŒ‰éœ€è°ƒæ•´ã€‚ æœ€åç‚¹å‡» å®‰è£…ï¼Œä¼šæç¤ºä¸èƒ½é€‰æ‹©VHDä½œä¸ºå¼•å¯¼é©±åŠ¨å™¨ï¼Œç‚¹å‡»ç¡®å®šç»§ç»­å³å¯ã€‚\nå®‰è£…ç»“æŸä¼šæç¤ºé‡å¯ï¼Œå°±ä¸ç”¨é‡å¯äº†ã€‚\næœ€ååˆ†ç¦» VHDï¼Œä¸€ä¸ª Windows çš„ L0 é•œåƒå°±åšå¥½äº†ã€‚\n","date":"2024-01-14T17:57:22+08:00","image":"http://localhost:1313/p/2024/01/cloud-firmware-hyperv/cover_huaa4a84f5cf7d21ee1a9e36e7973b6fa4_770531_120x120_fill_box_smart1_3.png","permalink":"http://localhost:1313/p/2024/01/cloud-firmware-hyperv/","title":"åœ¨ Hyper-V ä¸­ä½“éªŒ é™†å¤§å¤§çš„äº‘å›ºä»¶ \u0026 ä½¿ç”¨ WinNTSetup åˆ¶ä½œ L0 é•œåƒ"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\nğŸ‘‰ éœ€è¦çš„æœ‹å‹è‡ªå–ã€‚\nä½¿ç”¨ Github Actions æ„å»ºï¼Œè¿‡ç¨‹å…¨é€æ˜ï¼Œä¸å­˜åœ¨åé—¨çš„å¯èƒ½ã€‚å®˜æ–¹é•œåƒï¼Œéç ´è§£ã€‚\nRouterOS chr-7.x å·²ç»åŒ…å«äº† efi å¯åŠ¨æ–‡ä»¶ï¼Œä½†æ˜¯åˆ†åŒºç±»å‹æ˜¯ ext2ã€‚\næ‰€ä»¥ï¼Œåªè¦æŠŠåˆ†åŒºç±»å‹ä» ext2 è½¬æˆ fat å°±å¯ä»¥ä» uefi å¼•å¯¼å¯åŠ¨äº†ã€‚\nå½“ç„¶ï¼Œå–œæ¬¢ GPT çš„è¯ï¼Œä¹Ÿå¯ä»¥åˆ¶ä½œ Hybrid MBRã€‚\n# é•œåƒä¸‹è½½ ğŸ‘‰ Release ğŸ‘ˆ\nğŸ‘‰ ç ´è§£ç‰ˆä¼ é€é—¨ ğŸ‘ˆ\nåŒ…å«çš„é•œåƒç±»å‹ï¼š\nimg qcow2 vdi vhd vhdx vmdk # Hybrid MBR è®°å½• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ( echo 2 # use GPT echo t # change partition code echo 1 # select first partition echo 8300 # change code to Linux filesystem 8300 echo r # Recovery/transformation echo h # Hybrid MBR echo 1 2 # partitions added to the hybrid MBR echo n # Place EFI GPT (0xEE) partition first in MBR (good for GRUB)? (Y/N) echo # Enter an MBR hex code (default 83) echo y # Set the bootable flag? (Y/N) echo # Enter an MBR hex code (default 83) echo n # Set the bootable flag? (Y/N) echo n # Unused partition space(s) found. Use one to protect more partitions? (Y/N) echo w # write changes to disk echo y # confirm ) | sudo -E gdisk /dev/nbd1 ","date":"2023-12-07T17:11:11+08:00","image":"http://localhost:1313/p/2023/12/routeros-uefi/cover_hud8282d25cdf4a87aa5f8fc54a7be57e4_89180_120x120_fill_box_smart1_3.png","permalink":"http://localhost:1313/p/2023/12/routeros-uefi/","title":"RouterOS CHR v7 UEFI é•œåƒï¼Œä½¿ç”¨ Github Actions æ„å»º"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\nVXLANï¼ˆVirtual eXtensible Local Area Networkï¼Œè™šæ‹Ÿæ‰©å±•å±€åŸŸç½‘ï¼‰ï¼Œæ˜¯ç”± IETF å®šä¹‰çš„ NVO3ï¼ˆNetwork Virtualization over Layer 3ï¼‰æ ‡å‡†æŠ€æœ¯ä¹‹ä¸€ï¼Œæ˜¯å¯¹ä¼ ç»Ÿ VLAN åè®®çš„ä¸€ç§æ‰©å±•ã€‚VXLAN çš„ç‰¹ç‚¹æ˜¯å°† L2 çš„ä»¥å¤ªå¸§å°è£…åˆ° UDP æŠ¥æ–‡ï¼ˆå³ L2 over L4ï¼‰ä¸­ï¼Œå¹¶åœ¨ L3 ç½‘ç»œä¸­ä¼ è¾“ã€‚\nVXLAN æœ¬è´¨ä¸Šæ˜¯ä¸€ç§éš§é“æŠ€æœ¯ï¼Œåœ¨æºç½‘ç»œè®¾å¤‡ä¸ç›®çš„ç½‘ç»œè®¾å¤‡ä¹‹é—´çš„ IP ç½‘ç»œä¸Šï¼Œå»ºç«‹ä¸€æ¡é€»è¾‘éš§é“ï¼Œå°†ç”¨æˆ·ä¾§æŠ¥æ–‡ç»è¿‡ç‰¹å®šçš„å°è£…åé€šè¿‡è¿™æ¡éš§é“è½¬å‘ã€‚\nå…³äº VXLANï¼Œè¿™é‡Œä¸å±•å¼€è®²ï¼Œåªéœ€è¦çŸ¥é“ä¸¤ç‚¹ï¼š\nå®ƒæ˜¯ä¸€ç§éš§é“æŠ€æœ¯ å®ƒåœ¨å…¬æœ‰äº‘ä¸­è¢«å¹¿æ³›åº”ç”¨ æ›´æ·±å…¥çš„äº†è§£ï¼Œå¯ä»¥å‚è€ƒä»€ä¹ˆæ˜¯ VXLANã€‚\næ—¢ç„¶æ˜¯éš§é“ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥æ•´æ´»å„¿ã€‚ç”±äºè¢«å…¬æœ‰äº‘å¹¿æ³›åº”ç”¨ï¼ŒçŒœæµ‹ GFW å¯¹å®ƒçš„å®¡æŸ¥åº”è¯¥æœ‰æ‰€æ”¾æ¾ã€‚è®°å¾—æ›¾ç»åœ¨æŸå…¬å¸äº‘æœåŠ¡çš„ä¸€åœºä¼šè®®ä¸Šï¼Œå¬å…¶é«˜ç®¡è®²ï¼Œå…±æœ‰äº‘çš„è·¨å›½æµé‡é‡Œï¼Œ80% çš„æµé‡éƒ½æ˜¯éæ³•ä¸šåŠ¡ã€‚\næ—¢å¦‚æ­¤ï¼Œå¦‚æœç”¨ VXLAN æ¥ç§‘å­¦ä¸Šç½‘ï¼Œæ•ˆæœä¼šä¸ä¼šä¸é”™ï¼Ÿ\n1 2 3 å…ˆè¯´ç»“è®ºå§ï¼š - ç›´æ¥æŠŠ VXLAN ä½œä¸ºéš§é“ç¿»å¢™æ˜¯ä¸å¯è¡Œçš„ï¼Œç»æµ‹è¯•ï¼Œç”±äº VXLAN å¹¶ä¸åŠ å¯†ï¼ŒGFW çš„å®¡æŸ¥åº”è¯¥æ˜¯ä¼šå‰¥ç¦» VXLAN å¤´éƒ¨ç›´æ¥å®¡æŸ¥å†…éƒ¨æŠ¥æ–‡ã€‚ - æ‰€ä»¥ï¼Œå³ä½¿ç»è¿‡äº† VXLAN éš§é“ï¼ŒæŠŠ VPS ä½œä¸ºç½‘å…³ï¼Œè®¿é—®æƒ…å†µå’Œå›½å†…ç›´æ¥è®¿é—®ä¸€è‡´ã€‚ # ç½‘ç»œè§„åˆ’ æ•´ä½“æ€è·¯å°±æ˜¯æ—è·¯ç”±çš„æ€è·¯ï¼Œç›´æ¥ä¸Šå›¾ï¼š\nåˆ’é‡ç‚¹ï¼š\nVXLAN æ˜¯è¦åŒå‘é…ç½®çš„ï¼Œæ‰€ä»¥æœ¬åœ°å’Œè¿œç«¯éƒ½å¿…é¡»æ˜¯å…¬ç½‘IPã€‚ æœ¬åœ°ä½¿ç”¨ RouterOS 7ï¼Œå½“æ—¶èµ·ä¸ª Liunx ä¹Ÿå¯ä»¥ï¼Œç”¨ ROS ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿é…ç½®ç­–ç•¥è·¯ç”±æ¥åˆ†æµã€‚ # å¼€å§‹é…ç½® ä»¥ä¸‹æ¶‰åŠåˆ°å…¬ç½‘çš„ IP çš„ï¼Œä½¿ç”¨ x æ›¿æ¢äº†ä¸€éƒ¨åˆ†ï¼Œå¤åˆ¶å‘½ä»¤æ—¶è¯·è‡ªè¡Œæ›¿æ¢ã€‚\nè¿™é‡Œæ˜¯æ–°æ‹‰èµ·äº†ä¸€ä¸ª Linode VPS ä½œä¸ºè¿œç«¯æœåŠ¡å™¨ï¼Œç³»ç»Ÿä½¿ç”¨çš„æ˜¯ Ubuntu 22.04ã€‚\n# VPS å‡†å¤‡å·¥ä½œ # 1. ç¦ç”¨é˜²ç«å¢™ æ—¢ç„¶æ˜¯å®éªŒï¼Œå…ˆç¦ç”¨é˜²ç«å¢™ï¼Œé¿å…å…¶å¯èƒ½çš„å½±å“ã€‚\n1 2 systemctl stop ufw.service systemctl disable ufw.service # 2. å¼€å¯è½¬å‘ 1 vim /etc/sysctl.conf å–æ¶ˆä»¥ä¸‹ä¸¤è¡Œçš„æ³¨é‡Š\n1 2 net.ipv4.ip_forward=1 net.ipv6.conf.all.forwarding=1 å†æ‰§è¡Œ\n1 sysctl -p # RouterOS å‡†å¤‡å·¥ä½œ RouterOS çš„é…ç½®å°±ä¸æˆª winbox é…ç½®ç•Œé¢çš„å›¾äº†ï¼Œå‘½ä»¤è¡Œå’Œç•Œé¢åŸºæœ¬éƒ½èƒ½å¯¹ä¸Šï¼Œç›´æ¥è´´å‘½ä»¤è¡Œäº†ã€‚\n# 1. IPæœåŠ¡çš„å®‰å…¨ç­–ç•¥å…ˆåŠ ä¸Šï¼Œé¿å…è¢«çˆ†ç ´ï¼Œå¯¼è‡´æ§åˆ¶å°ç–¯ç‹‚è¾“å‡ºç™»å½•å¤±è´¥æ—¥å¿— 1 2 3 4 5 6 7 8 /ip service set telnet address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set ftp address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set www address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set ssh address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set www-ssl address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set api address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set winbox address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 /ip service set api-ssl address=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 # 2. é…ç½®ä¸Šç½‘ï¼Œè¿™é‡Œæ˜¯ PPPOE æ‹¨å· ä¿®æ”¹ä¸‹æ¥å£åå­—\n1 2 /interface ethernet set [ find default-name=ether1 ] name=ether1-wan /interface ethernet set [ find default-name=ether2 ] name=ether2-lan é…ç½® PPPOE\n1 /interface pppoe-client add interface=ether2-wan name=pppoe-wan user=\u0026lt;user\u0026gt; password=\u0026lt;password\u0026gt; é…ç½® DNS\n1 /ip dns set allow-remote-requests=yes servers=223.5.5.5,114.114.114.114 # é…ç½®æ£€æŸ¥ # æœ¬åœ° ROS ping VPS 1 2 3 4 5 6 [root@rostest] \u0026gt; ping 172.233.142.x SEQ HOST SIZE TTL TIME STATUS 0 172.233.142.x 56 47 184ms440us 1 172.233.142.x 56 47 184ms340us 2 172.233.142.x 56 47 184ms235us sent=3 received=3 packet-loss=0% min-rtt=184ms235us avg-rtt=184ms338us max-rtt=184ms440u å¯ä»¥çœ‹åˆ°ç½‘ç»œæ˜¯é€šçš„ã€‚\n# VPS ping æœ¬åœ° ROS çš„å…¬ç½‘ IP 1 2 3 4 5 6 7 8 9 root@localhost:~# ping 121.229.x.x PING 121.229.x.x (121.229.x.x) 56(84) bytes of data. 64 bytes from 121.229.x.x: icmp_seq=1 ttl=40 time=186 ms 64 bytes from 121.229.x.x: icmp_seq=2 ttl=40 time=186 ms 64 bytes from 121.229.x.x: icmp_seq=3 ttl=40 time=186 ms --- 121.229.x.x ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2002ms rtt min/avg/max/mdev = 185.582/185.879/186.073/0.213 ms å¯ä»¥çœ‹åˆ°ç½‘ç»œæ˜¯é€šçš„ã€‚\n# VXLAN: VPS é…ç½® ä»¥ä¸‹åˆ†åˆ«ä¸ºå‘½ä»¤è¡Œå’Œ netplan çš„é…ç½®ã€‚\n# å‘½ä»¤è¡Œ 1 2 3 4 5 6 7 8 ip link add vxlan0 type vxlan \\ id 3000 \\ remote 121.229.x.x \\ dstport 4789 \\ local 172.233.142.x \\ dev eth0 ip link set vxlan0 up ip addr add 192.168.99.2/24 dev vxlan0 æŸ¥çœ‹ vxlan0 æ¥å£\n1 2 3 4 5 6 7 8 9 root@localhost:~# ifconfig vxlan0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1450 inet 192.168.99.2 netmask 255.255.255.0 broadcast 0.0.0.0 inet6 fe80::ec90:6ff:fe88:372d prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether ee:90:06:88:37:2d txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 8 bytes 544 (544.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 æŸ¥çœ‹è·¯ç”±è¡¨ï¼Œå¤šäº†ä¸‹é¢çš„å†…å®¹ï¼Œæ‰€æœ‰ç›®çš„åœ°å€æ˜¯ 192.168.99.0/24 ç½‘ç»œåŒ…è¦é€šè¿‡ vxlan0 è½¬å‘ï¼š\n1 2 root@localhost:~# ip route show 192.168.99.0/24 dev vxlan0 proto kernel scope link src 192.168.99.2 æŸ¥çœ‹ fdbã€‚è¿™ä¸ªè¡¨é¡¹çš„æ„æ€æ˜¯ï¼Œé»˜è®¤çš„ VTEP å¯¹ç«¯åœ°å€ä¸º 121.229.x.xã€‚æ¢å¥è¯è¯´ï¼ŒåŸå§‹æŠ¥æ–‡ç»è¿‡ vxlan0 åä¼šè¢«å†…æ ¸æ·»åŠ ä¸Š VXLAN å¤´éƒ¨ï¼Œè€Œå¤–éƒ¨ UDP å¤´çš„ç›®çš„ IP åœ°å€ä¼šè¢«å† ä¸Š 121.229.x.xã€‚\n1 2 root@localhost:~# bridge fdb show 00:00:00:00:00:00 dev vxlan0 dst 121.229.x.x via eth0 self permanent # netplan é…ç½®æ–‡ä»¶ å‘½ä»¤è¡Œé…ç½®é‡å¯åä¼šå¤±æ•ˆï¼Œæ”¾åˆ° netplan é‡Œé…ç½®æŒä¹…åŒ–ã€‚\n/etc/netplan/99-vxlan-config.yaml\n1 2 3 4 5 6 7 8 9 10 11 network: version: 2 tunnels: vxlan0: mode: vxlan local: 172.233.142.x remote: 121.229.x.x id: 3000 port: 4789 addresses: - 192.168.99.2/24 # VXLAN: æœ¬åœ° ROS é…ç½® å…ˆåˆ›å»º VXLANï¼Œç„¶åå†æŠŠ VXLAN æ¥å£å’Œ LAN å£æ¡¥æ¥ã€‚\n# åˆ›å»º VXLAN 1 2 /interface vxlan add name=vxlan0 port=4789 vni=3000 /interface vxlan vteps add interface=vxlan0 remote-ip=172.233.142.x # æ¡¥æ¥ vxlan0 å’Œ ether2-lan 1 2 3 /interface bridge add name=br-lan /interface bridge port add bridge=br-lan interface=ether2-lan /interface bridge port add bridge=br-lan interface=vxlan0 # br-lan é…ç½® IP 1 /ip address add address=192.168.99.1/24 interface=br-lan network=192.168.99.0 è¿™é‡Œé…ç½®çš„ IP å’Œ VPS ä¸Šç»™ vxlan0 æ¥å£é…ç½®çš„ IP æ˜¯ç›¸åŒç½‘æ®µçš„ã€‚\n# æµ‹è¯• VXLAN éš§é“ åœ¨ VPS ä¸Š ping ROS çš„ br-lan æ¥å£çš„ IP\n1 2 3 4 5 6 7 8 9 root@localhost:~# ping 192.168.99.1 PING 192.168.99.1 (192.168.99.1) 56(84) bytes of data. 64 bytes from 192.168.99.1: icmp_seq=1 ttl=64 time=144 ms 64 bytes from 192.168.99.1: icmp_seq=2 ttl=64 time=144 ms 64 bytes from 192.168.99.1: icmp_seq=3 ttl=64 time=144 ms --- 192.168.99.1 ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2003ms rtt min/avg/max/mdev = 144.359/144.400/144.446/0.035 ms åœ¨ ROS ä¸Š ping VPS çš„ vxlan0 æ¥å£çš„ IP\n1 2 3 4 5 6 [root@rostest] \u0026gt; ping 192.168.99.2 SEQ HOST SIZE TTL TIME STATUS 0 192.168.99.2 56 64 144ms271us 1 192.168.99.2 56 64 144ms647us 2 192.168.99.2 56 64 144ms309us sent=3 received=3 packet-loss=0% min-rtt=144ms271us g-rtt=144ms409us max-rtt=144ms647us å¯ä»¥çœ‹åˆ°ï¼ŒVXLAN å·²ç»äº’é€šäº†ã€‚\nåœ¨ VPS ä¸Šå†æŸ¥çœ‹ä¸€ä¸‹ fdbï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°ç½‘ç»œçš„ä¸€äº› MAC åœ°å€å·²ç»å­¦ä¹ è¿‡æ¥äº†ï¼Œæ‘˜å–äº†éƒ¨åˆ†ï¼š\n1 2 3 4 00:00:00:00:00:00 dev vxlan0 dst 121.229.x.x self permanent ac:82:26:xx:xx:xx dev vxlan0 dst 121.229.x.x self 26:99:ac:xx:xx:xx dev vxlan0 dst 121.229.x.x self 98:3f:60:xx:xx:xx dev vxlan0 dst 121.229.x.x self # åœ¨ VPS ä¸Šé…ç½® snat æºåœ°å€ NAT ä¸å¤šè¯´äº†ï¼Œä¸æ˜ç™½çš„è‡ªå·±æŸ¥ã€‚\n1 2 3 4 5 6 iptables -t nat \\ -A POSTROUTING \\ -s 192.168.99.0/24 \\ -o eth0 \\ -j SNAT \\ --to-source 172.233.142.x é…ç½®å®ŒæŸ¥çœ‹ä¸‹ï¼Œç¡®ä¿é…ç½®æˆåŠŸ\n1 2 3 4 root@localhost:~# iptables -nL -t nat Chain POSTROUTING (policy ACCEPT) target prot opt source destination SNAT all -- 192.168.99.0/24 0.0.0.0/0 to:172.233.142.x # PC ä¸Šç½‘æµ‹è¯• æŠŠæœ¬åœ°ç”µè„‘çš„ç½‘ç»œé…ç½®æˆï¼š\nåœ°å€: 192.168.99.200 æ©ç : 255.255.255.0 ç½‘å…³: 192.168.99.2 DNS: 8.8.8.8 åœ¨ VPS ä¸Š ping ä¸€ä¸‹ 192.168.99.200\n1 2 3 4 5 6 7 8 9 root@localhost:~# ping 192.168.99.200 PING 192.168.99.200 (192.168.99.200) 56(84) bytes of data. 64 bytes from 192.168.99.200: icmp_seq=1 ttl=128 time=145 ms 64 bytes from 192.168.99.200: icmp_seq=2 ttl=128 time=144 ms 64 bytes from 192.168.99.200: icmp_seq=3 ttl=128 time=143 ms --- 192.168.99.200 ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 1998ms rtt min/avg/max/mdev = 143.159/144.091/144.858/0.703 ms å¯ä»¥çœ‹åˆ°ï¼ŒVPS å’Œæœ¬åœ° PC å·²ç»è¿é€šï¼Œå¹¶ä¸”è¿˜æ˜¯ç›¸åŒç½‘æ®µçš„äºŒå±‚åŸŸã€‚\næ‰“å¼€æµè§ˆå™¨ï¼Œæ‰“å¼€ https://ip.skk.moe/ æµ‹è¯•ä¸‹ã€‚\nä»å›¾ä¸­å¯çŸ¥ï¼ŒIP åœ°å€å·²ç»æ˜¯ VPS çš„å…¬ç½‘IPï¼Œä½†æ˜¯è®¿é—®é˜»æ–­æƒ…å†µå’Œå›½å†…ç›´æ¥è®¿é—®ä¸€è‡´ï¼Œå¹¶ä¸”è¿˜é¢å¤–å¯¼è‡´ç™¾åº¦æ— æ³•è®¿é—®ã€‚\nå†æ¬¡æµ‹è¯•ï¼Œä¾‹å¦‚ Apple ç­‰æœªè¢« GFW å°é”çš„ç½‘ç«™éƒ½æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ã€‚\nç”±æ­¤å¯è§ï¼šç”±äº VXLAN å¹¶ä¸åŠ å¯†ï¼ŒGFW çš„å®¡æŸ¥åº”è¯¥æ˜¯ä¼šå‰¥ç¦» VXLAN å¤´éƒ¨ç›´æ¥å®¡æŸ¥å†…éƒ¨æŠ¥æ–‡ï¼Œæ‰€ä»¥è®¿é—®é˜»æ–­çš„ç»“æœå’Œå›½å†…ä¸€è‡´ã€‚\n# ç»“è®º GFW å¯¹ VXLAN å¹¶ä¸ä¼šæ”¾æ¾å®¡æŸ¥ï¼Œä½†æ˜¯çŒœæµ‹ï¼šVXLAN æŠ¥æ–‡ä¸­å«æœ‰è¢«é˜»æ–­çš„åŸŸåã€IPï¼Œå¹¶ä¸ä¼šç›´æ¥å¯¼è‡´ GFW å°é” VPS çš„ IPã€‚ ç”±ç¬¬1ç‚¹ï¼Œæˆ–è®¸å¯ä»¥é‡‡ç”¨ VXLAN æŠ¥æ–‡ä½œä¸ºå¤–å±‚åŒ…è£…ï¼Œä»è€Œè¾¾åˆ°ä¿æŠ¤ VPS IP çš„ç›®çš„ã€‚æ¯•ç«Ÿå„å¤§æœºåœºåŸºæœ¬éƒ½æ˜¯é€šè¿‡å›½å†…å…¬æœ‰äº‘ä¸­è½¬ï¼Œè€Œä¸­è½¬æµé‡å¾ˆå¤§ä¸€éƒ¨åˆ†åº”è¯¥è·‘åœ¨ VXLAN ä¹‹ä¸Šã€‚ VXLAN å¯¹æ€§èƒ½çš„æŸå¤±éå¸¸å°ï¼Œä½†ç”±äº VXLAN çš„é…ç½®éœ€è¦åŒå‘å…¬ç½‘ IPï¼Œæ²¡æœ‰å…¬ç½‘ IP çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨èµ·æ¥æœ‰ä¸¤ä¸ªæ€è·¯ï¼š ä½œä¸ºå¤–å±‚åŒ…è£…åè®®ï¼Œå¹¶ä¸å®é™…åˆ›å»º VXLAN éš§é“ï¼› ä½¿ç”¨å›½å†…å…¬æœ‰äº‘ä¸­è½¬ï¼Œå›½å†…å¤– VPS ç›´æ¥é…ç½® VXLAN éš§é“ï¼› ","date":"2023-12-01T22:09:55+08:00","image":"http://localhost:1313/p/2023/12/fuck-gfw-vxlan/cover_hue34695e9e5194dc70340a7c1fbc98d68_55478_120x120_fill_box_smart1_3.png","permalink":"http://localhost:1313/p/2023/12/fuck-gfw-vxlan/","title":"Vxlan æ˜¯å¦èƒ½è®© GFW æ”¾æ¾ä¸€ç‚¹ï¼ŸVxlan æ­å»ºç§‘å­¦ä¸Šç½‘å®éªŒ"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\né›†æˆå‚è€ƒäº† Google çš„ docsy ä¸­çš„é›†æˆæ–¹å¼ã€‚\nä¸»é¢˜ hugo-theme-stack ä¸­æ²¡æœ‰é›†æˆ Mermaidï¼Œä»…é›†æˆäº† Katexï¼Œéœ€è¦ç”»å›¾çš„æ—¶å€™å°±è¦è‡ªå·±å¼•å…¥ Mermaid ã€‚\nç”±äºä½¿ç”¨ module çš„æ–¹å¼ä½¿ç”¨ä¸»é¢˜ï¼Œæ•…å¹¶ä¸æƒ³å› ä¸ºä¸ºäº†å¼•å…¥ Mermaid è€Œä¿®æ”¹ä¸»é¢˜æ¨¡æ¿ã€‚Stack æä¾›äº†ä¸¤ä¸ªç©ºçš„æ¨¡æ¿æ¥æ”¯æŒè‡ªå®šä¹‰ï¼Œæ‰€ä»¥å°±é€šè¿‡è¿™ä¸¤ä¸ªè‡ªå®šä¹‰æ¨¡æ¿æ¥å¼•å…¥ã€‚\nlayouts/partials/head/custom.html layouts/partials/footer/custom.html å¦å¤–ï¼Œä¸ºäº†æ–¹ä¾¿åç»­ç»´æŠ¤ï¼Œä¹ŸåŒæ—¶ä½¿ç”¨ docsy é‡Œçš„æ–¹å¼å¼•å…¥äº† Katexã€‚\n# é›†æˆæ–¹å¼ ä¸»è¦çš„å·¥ä½œæ˜¯æ·»åŠ é’©å­æ¨¡æ¿å’Œå¼•å…¥ç›¸å…³çš„JavaScriptæ–‡ä»¶ã€‚\n# æ–°å¢æ–‡ä»¶ å°†æœ¬é¡¹ç›®ä¸­çš„ä»¥ä¸‹æ–‡ä»¶ï¼Œç›´æ¥æ‹·è´åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # é’©å­æ¨¡æ¿ layouts/_default/_markup/render-codeblock-chem.html layouts/_default/_markup/render-codeblock-markmap.html layouts/_default/_markup/render-codeblock-math.html layouts/_default/_markup/render-codeblock-mermaid.html # ä¸»é¢˜å¯è‡ªå®šä¹‰çš„æ¨¡æ¿æ–‡ä»¶ layouts/partials/head/custom.html layouts/partials/footer/custom.html # JavaScriptæ–‡ä»¶é›†ä¸­å¼•å…¥ layouts/partials/scripts.html # JavaScriptæ–‡ä»¶å’ŒCSSæ–‡ä»¶ assets/js/markmap.js assets/js/mermaid.js static/js/prism.js static/css/prism.css # æ–°å¢ç›¸å…³é…ç½® config_default\\params.yaml\n1 2 3 4 5 6 7 8 9 10 11 markmap: enable: true mermaid: enable: true theme: default flowchart: diagramPadding: 20 katex: enable: true mhchem: enable: true PS: å¦‚æœä¸æ˜¯ä½¿ç”¨çš„Configuration Directoryï¼Œè¦æŠŠé…ç½®åŠ åˆ°paramsä¸‹ã€‚\n# ä½¿ç”¨ç¤ºä¾‹ # Mermaid graph TD; A--\u0026gt;B; A--\u0026gt;C; B--\u0026gt;D; C--\u0026gt;D; # MarkMap # markmap ## Links - \u0026lt;https://markmap.js.org/\u0026gt; - [GitHub](https://github.com/gera2ld/markmap) ## Related - [coc-markmap](https://github.com/gera2ld/coc-markmap) - [gatsby-remark-markmap](https://github.com/gera2ld/gatsby-remark-markmap) ## Features - links - **inline** ~~text~~ *styles* - multiline text - `inline code` - ```js console.log(\u0026#39;code block\u0026#39;); ``` - Katex - $x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$ # Mathjax è¡Œé—´å…¬å¼ï¼š$$\\sum_{i=0}N\\int_{a}{b}g(t,i)\\text{d}t$$\nè¡Œå†…å…¬å¼ï¼š\\(y=ax+b\\)\nmath ä»£ç å—ï¼š\n$$\\tag*{(1)} P(E) = {n \\choose k} p^k (1-p)^{n-k}$$ # mhchem $$\\tag*{(2)} \\ce{Zn^2+ \u003c=\u003e[+ 2OH-][+ 2H+] $\\underset{\\text{amphoteric hydroxide}}{\\ce{Zn(OH)2 v}}$ \u003c=\u003e[+ 2OH-][+ 2H+] $\\underset{\\text{tetrahydroxozincate}}{\\ce{[Zn(OH)4]^2-}}$}$$","date":"2023-04-19T21:59:22+08:00","image":"http://localhost:1313/p/2023/04/hugo-diagrams/cover_hu12622322b94eb79e6e7d3536c4e44d98_131370_120x120_fill_q75_box_smart1.jpg","permalink":"http://localhost:1313/p/2023/04/hugo-diagrams/","title":"åœ¨ Hugo Stack ä¸­é›†æˆ Mermaid å’Œ MarkMap"},{"content":"ğŸ”¥ğŸ”¥ğŸ”¥ï¼šç¨³å®šå¥½ç”¨çš„æœºåœº/æ¢¯å­ TAG å…¨çƒ250+èŠ‚ç‚¹ã€99+æµåª’ä½“è§£é”ï¼Œæ›´å¤šå‚è€ƒæœºåœºæ¨è\n# å‰è¨€ å½“å‰ V2Ray åº”è¯¥ç®—æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ç¿»å¢™è½¯ä»¶ï¼Œå’Œ ssã€ssr ç›¸æ¯”è¿˜æ˜¯å¾ˆç¨³å®šçš„ï¼Œä¸å®¹æ˜“è¢«æ£€æµ‹ï¼Œå°¤å…¶æ˜¯åŠ ä¸Š Nginx å’Œ TLSï¼Œå†åšä¸ªç®€å•çš„ç½‘ç«™é¡¶åœ¨å‰é¢ï¼Œå®Œå…¨ä¼ªé€ æˆäº†ä¸€ä¸ªæ­£å¸¸çš„ç½‘é¡µè®¿é—®è¡Œä¸ºï¼Œéå¸¸å®‰å…¨å¯é ï¼Œå¹¶ä¸”å…·æœ‰å¾ˆå¼ºçš„æŠ—æ£€æµ‹èƒ½åŠ›ã€‚\nå¿…é¡»ä¼šç®€å•ä½¿ç”¨ Linux å‘½ä»¤è¡Œï¼Œå³ Shell ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„åŸŸåå‡ä¸ºwww.example.ccï¼ŒåŸŸåã€UUID ä»¥åŠ MTProto çš„å¯†é’¥è¯·è®°å¾—æ›¿æ¢æˆè‡ªå·±çš„ æœ‰è€å¿ƒã€å–œæ¬¢æŠ˜è…¾æˆ–è€…æƒ³è‡ªå·±å­¦ç‚¹ä¸œè¥¿çš„å°±å¾€ä¸‹çœ‹ æ²¡è€å¿ƒçš„å¯ä»¥å»ç”¨æœºåœºæˆ–è€…ä¸€é”®è„šæœ¬ è¿™æ˜¯é’ˆå¯¹å­¦ç”Ÿå’Œå·¥è–ªé˜¶å±‚ä¸”æœ‰ç§‘å­¦ä¸Šç½‘éœ€æ±‚çš„åŒå¿—ï¼ŒåœŸè±ªè¯·ç›´æ¥ç”¨æœºåœºå»å§ï¼ˆæ¯”å¦‚å¤–å· richCloud çš„ rixCloudï¼‰ # å‚è€ƒæ–‡æ¡£ V2Ray å®˜æ–¹æ–‡æ¡£ V2Ray ç™½è¯æ–‡æ•™ç¨‹ MTProxy å®˜æ–¹æ–‡æ¡£\n# æ¶‰åŠçš„å†…å®¹ graph LR subgraph V2Ray v2rayws[V2Ray WebSocket] v2raytg[V2Ray MTProto] end free((WAN)) rep(å¤–éƒ¨è¯·æ±‚) --\u0026gt; in[Nginx] in -- / --\u0026gt; web[è…¾è®¯å…¬ç›Š404] in -- /wss --\u0026gt; v2rayws v2rayws --\u0026gt; free tgc(Telegram Client) --\u0026gt; v2raytg v2raytg --\u0026gt; free åŸŸåç”³è¯·ï¼› Let\u0026rsquo;s Encrypt ç”³è¯· SSL è¯ä¹¦ï¼› Nginx ä½œä¸ºå‰ç½®æœåŠ¡é…ç½® web ä¸»é¡µï¼› é€šè¿‡é…ç½® Nginx åå‘ä»£ç†è®¿é—®åé¢çš„ v2ray æœåŠ¡ï¼› v2ray åŒæ—¶æä¾› mtproto æœåŠ¡ï¼› ä½¿ç”¨è…¾è®¯å…¬ç›Š 404 ä½œä¸º web ä¸»é¡µï¼› # å¤§è‡´çš„æ­¥éª¤ å‡†å¤‡æœåŠ¡å™¨ï¼› ç”³è¯·åŸŸåï¼› åˆ›å»ºç½‘ç«™æ ¹ç›®å½•ï¼› å®‰è£… Nginxï¼› è·å¾— SSL è¯ä¹¦ï¼› ä¿®æ”¹ Nginx é…ç½®æ”¯æŒ Httpsï¼› å®‰è£…å¯åŠ¨ V2Rayï¼› # å®‰è£…éƒ¨ç½² # ç«¯å£è§„åˆ’ Port Listen IP Use 80 0.0.0.0 Nginx Http 443 0.0.0.0 Nginx Https 10443 127.0.0.1 V2Ray WebSocket 8080 0.0.0.0 V2Ray MTProto # æœåŠ¡å™¨å‡†å¤‡ æ‹¿æ¥ç¿»å¢™ç”¨çš„æœåŠ¡å™¨ï¼Œè‚¯å®šæ˜¯æœ¬ç€ä¾¿å®œå¥½ç”¨æ€§ä»·æ¯”é«˜çš„åŸåˆ™æ¥é€‰æ‹©ã€‚æ¬ç“¦å·¥æ¯•ç«Ÿæœ‰ cn2 å’Œ cn2 gia çº¿è·¯ï¼Œä»·æ ¼ä¹Ÿç®—æ˜¯æœ€ä¾¿å®œçš„ï¼Œé‡ç‚¹å¯ä»¥æ”¯ä»˜å®æ”¯ä»˜ï¼Œè¿˜æ˜¯é€‰æ‹©æ¬ç“¦å·¥å§ã€‚\né€¢å¹´è¿‡èŠ‚ï¼Œæ¬ç“¦å·¥éƒ½ä¼šæ¨å‡ºç‰¹åˆ«æ¬¾ä¼˜æƒ ä¸»æœºï¼Œæ¯”å¦‚åŒåä¸€ã€é»‘äº”ï¼Œæ€§ä»·æ¯”æé«˜ï¼å¯ä»¥å…³æ³¨ä¸‹ã€‚\n# BandwagonHost å¥—é¤é€‰æ‹© æ¬ç“¦å·¥å¥—é¤å¾ˆå¤šï¼Œç›¸åŒé…ç½®ä¸åŒä»·æ ¼æ’åºå¦‚ä¸‹ï¼š æ™®é€šçº¿è·¯ \u0026lt; CN2çº¿è·¯ \u0026lt; CN2 GIAçº¿è·¯ ä¸€èˆ¬æƒ…å†µä¸‹ä¸ªäººä½¿ç”¨æˆ–è€…å®¶ç”¨çš„è¯ï¼Œæœ€ä¾¿å®œçš„å¥—é¤è¶³ä»¥ï¼Œä¸å¸¸çœ‹è§†é¢‘ï¼Œä¸€ä¸ªæœˆæµé‡åœ¨ 100-200GBã€‚\næ³¨å†Œè´­ä¹°ä»€ä¹ˆçš„å°±ä¸èµ˜è¿°äº†ï¼Œç°åœ¨ä¸Šè¿‡å­¦éƒ½çœ‹å¾—æ‡‚è‹±æ–‡ã€‚\næ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ç›¸åº”çš„é…ç½®å³å¯ï¼Œé¿å…æµªè´¹ã€‚\nè®¿é—®è°·æ­Œï¼Œç®€å•çš„ç½‘é¡µè®¿é—®éœ€æ±‚ 1 2 3 4 5 6 10G VZ - PROMO SSD: 10 GB RAID-10 RAM: 512 MB CPU: 1x Intel Xeon Transfer: 500 GB/mo Link speed: 1 Gigabit 19.99 ç¾åˆ€ä¸€å¹´ï¼Œåªèƒ½å¹´ä»˜ã€‚ OpenVZ æ¶æ„ï¼Œå”¯ä¸€çš„ä¼˜åŠ¿å°±æ˜¯ä¾¿å®œã€‚é«˜å³°æœŸå¯¹ä¸»æœºæ€§èƒ½å’Œç½‘ç»œéƒ½æœ‰å½±å“ã€‚\nå¶å°”çœ‹çœ‹è§†é¢‘ï¼Œæ¯”å¦‚æ²¹ç®¡ 1 2 3 4 5 6 SPECIAL 10G KVM PROMO V3 - LOS ANGELES - CN2 SSD: 10 GB RAID-10 RAM: 512 MB CPU: 1x Intel Xeon Transfer: 500 GB/mo Link speed: 1 Gigabit 29.99 ç¾åˆ€ä¸€å¹´ï¼Œåªèƒ½å¹´ä»˜ã€‚ä¸€èˆ¬äººå»ºè®®ä¹°è¿™ä¸ªã€‚ KVM æ¶æ„ï¼Œå»¶è¿Ÿå‹‰å¼ºï¼Œ170mså·¦å³ï¼Œæ²¹ç®¡ 4K æ’‘å¾—ä½ã€‚é«˜å³°æœŸå¯¹ç½‘ç»œæœ‰ä¸€å®šå½±å“ã€‚\nå¼ºçƒˆè§†é¢‘éœ€æ±‚ï¼Œæ‰“æ¸¸æˆï¼Œéœ€è¦ä½å»¶è¿Ÿç½‘ç»œ 1 2 3 4 5 6 7 SPECIAL 10G KVM PROMO V3 - LOS ANGELES - CN2 GIA - LIMITED EDITION **Limited stock available** SSD: 10 GB RAID-10 RAM: 512 MB CPU: 1x Intel Xeon Transfer: 300 GB/mo Link speed: 1 Gigabit 39.99 ç¾åˆ€ä¸€å¹´ï¼Œåªèƒ½å¹´ä»˜ã€‚æ­¤å¥—é¤ç»å¸¸ç¼ºè´§ï¼Œæƒ³ä¹°çš„éœ€è¦å…³æ³¨ï¼Œæœ‰é’±å¯ä»¥ä¹°ä¸Šä¸€çº§å¥—é¤ï¼ˆå¯å­£ä»˜ã€åŠå¹´ä»˜ã€å¹´ä»˜ï¼‰ã€‚\nåŒæ · KVM æ¶æ„ï¼Œå»¶è¿Ÿæ¯” cn2 ç•¥ä½ï¼Œæ²¹ç®¡ 4K æ’‘å¾—ä½ã€‚é«˜å³°æœŸå¯¹ç½‘ç»œå½±å“è¾ƒå°ã€‚\n# å‡†å¤‡è½¯ä»¶ 1ã€ MobaXterm: SSH å®¢æˆ·ç«¯å·¥å…·ï¼Œé›†æˆäº† SFTPï¼Œå®‰è£…å…è´¹ç‰ˆå³å¯ 2ã€ Visual Studio Code: ç¼–è¾‘å™¨ï¼Œä¸»è¦æ‹¿æ¥ç¼–è¾‘ Nginx çš„é…ç½®æ–‡ä»¶å’Œ V2ray çš„é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒ JSON ä»£ç é«˜äº®ï¼Œé¿å…é…ç½®æ–‡ä»¶ç¼–å†™é”™è¯¯\n# é…ç½®æœåŠ¡å™¨ è¿™é‡Œä»¥æ¬ç“¦å·¥ä¸ºä¾‹ã€‚\n# æ›´æ¢æ“ä½œç³»ç»Ÿ å»ºè®®é€‰æ‹© CentOS7 å§ï¼Œæ–¹ä¾¿å¥½ç”¨ã€‚å¦‚æœæ˜¯ KVM æ¶æ„çš„æœºå™¨ï¼Œè¿˜èƒ½é€‰æ‹©æ”¯æŒ bbr çš„æ“ä½œ CentOSã€‚è¿™é‡Œä»¥ CN2 GIA çš„æœåŠ¡å™¨ä¸ºä¾‹ã€‚\nä»¥ä¸‹å‘½ä»¤å‡ä»¥ CentOS7 ä¸‹çš„å‘½ä»¤ä¸ºä¾‹\nç™»å½•æ¬ç“¦å·¥Client Areaï¼Œç‚¹Services -\u0026gt; My ServicesæŸ¥çœ‹è‡ªå·±çš„æ‰€æœ‰æœåŠ¡ ç‚¹å‡»å¯¹åº”Product/Serviceåé¢çš„KiwiVM Control PanelæŒ‰é’®è¿›å…¥æ§åˆ¶å° é¦–å…ˆå°†è™šæ‹Ÿæœºå…³æœºï¼Œå…³æœºåæ‰èƒ½é‡è£…ç³»ç»Ÿ é€‰æ‹©Install new OSï¼Œç„¶åé€‰æ‹©\u0026quot;centos-7-x86_64-bbr\u0026quot;ï¼Œå‹¾é€‰\u0026quot;I agree ...\u0026quot;ï¼Œç‚¹Reloadé‡æ–°å®‰è£… è®°ä¸‹ root å¯†ç å’Œç«¯å£å·å¤‡ç”¨ # æ›´æ”¹æœåŠ¡å™¨å¯†ç  ä½¿ç”¨ MobaXtermï¼ˆæˆ–è€…å…¶ä»– SSH å·¥å…·ï¼‰ï¼Œä½¿ç”¨åˆšåˆšçš„å¯†ç å’Œç«¯å£å·ç™»å½•æœåŠ¡å™¨ï¼Œæ³¨æ„ä¸‹ç«¯å£å·ï¼Œæ¬ç“¦å·¥çš„ SSH ä¸æ˜¯é»˜è®¤ 22 ç«¯å£ã€‚ ç™»å½•åæ‰§è¡Œpasswdï¼Œç„¶åè¾“å…¥ä¸¤éæ–°å¯†ç å³å¯\n1 2 3 4 5 $ passwd Changing password for user root. New password: Retype new password: passwd: all authentication tokens updated successfully. # æ›´æ–°ç³»ç»Ÿ æ¬ç“¦å·¥è‡ªå¸¦çš„ epel æ€»è§‰å¾—ç¼ºåŒ…ï¼Œæ‰€ä»¥å¸è½½é‡æ–°å®‰è£…ä¸‹ã€‚ åŒæ—¶éœ€è¦å®‰è£…ä¸‹ vimã€gitã€zip å’Œ unzipã€‚\n1 2 3 4 yum remove -y epel-release yum install -y epel-release yum update -y yum install -y vim git zip unzip # ç”³è¯·åŸŸå ç”±äºè¦ä½¿ç”¨ TLSï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªåŸŸåã€‚å»ºè®®æ³¨å†Œ.ccç»“å°¾çš„åŸŸåï¼Œä¾¿å®œå¹¶ä¸”ä¸éœ€è¦å®åè®¤è¯ã€‚ ä¼ é€é—¨ï¼šhttps://wanwang.aliyun.com/\nå‡è®¾æˆ‘ä»¬ç”³è¯·çš„åŸŸåçš„æ˜¯ï¼šexample.ccï¼Œç¼–å†™é…ç½®æ–‡ä»¶æ—¶è®°å¾—æ›¿æ¢æˆè‡ªå·±çš„ã€‚\n# é…ç½®åŸŸåè§£æ åŸŸåè§£æè¿™é‡Œé…ç½®ä¸¤æ¡ï¼ŒæŠŠexample.ccå’Œwww.example.ccéƒ½æŒ‡å‘æœåŠ¡å™¨çš„åœ°å€ã€‚ é…ç½®å¥½ä¹‹åï¼Œå¯ä»¥åœ¨æœ¬åœ° ping ä¸€ä¸‹ï¼Œçœ‹çœ‹é€šæ²¡é€šã€‚\n1 ping example.cc # å‡†å¤‡ web æ ¹ç›®å½• æ–°å»ºç›®å½•\n1 mkdir -p /www/root å¢åŠ index.html\n1 vim /www/root/index.html æŒ‰ä¸‹ié”®åˆ°æ’å…¥æ¨¡å¼åï¼Œå°†ä»¥ä¸‹æ‰€æœ‰å†…å®¹è´´è¿›å»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;404\u0026lt;/title\u0026gt; \u0026lt;meta http-equiv=\u0026#34;Content-Type\u0026#34; content=\u0026#34;text/html\u0026#34; charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\u0026#34; charset=\u0026#34;utf-8\u0026#34; homePageUrl=\u0026#34;https://www.example.cc/\u0026#34; homePageName=\u0026#34;å›åˆ°æˆ‘çš„ä¸»é¡µ\u0026#34; \u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;/html\u0026gt; # å®‰è£…é…ç½® Nginx Nginx å®‰è£…åï¼Œä¼šç”¨åˆ°ä¸¤ä»½é…ç½®ï¼š\nç¬¬ä¸€ä»½æ˜¯ç»™ç¬¬ä¸€æ¬¡ç”³è¯· Let\u0026rsquo;s Encrypt çš„ SSL è¯ä¹¦ç”¨çš„ï¼ˆç”±äºæ­¤æ—¶è¿˜æ²¡æœ‰è¯ä¹¦ï¼Œé…ç½®æˆ Httpsï¼‰ ç¬¬äºŒä»½æ˜¯å¢åŠ äº† V2Ray åä»£å’Œ Http é‡å®šå‘ Https çš„é…ç½®ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ç›´è¦ç”¨çš„é…ç½® # å®‰è£… Nginx å¾ˆç®€å•ï¼Œä¸€è¡Œå‘½ä»¤æå®šã€‚\n1 yum install -y nginx # ç¼–è¾‘nginx.conf æ–‡ä»¶/etc/nginx/nginx.confã€‚ å®³æ€•å‡ºé”™çš„æˆ–è€…æ–°æ‰‹è¯·å°†æ–‡ä»¶ SFTP ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä½¿ç”¨ VSCode ä¿®æ”¹åå† SFTP ä¼ å›æœåŠ¡å™¨ã€‚ ç†Ÿæ‚‰ vim çš„å°±ç›´æ¥åœ¨å‘½ä»¤è¡Œä¿®æ”¹å§ã€‚\né…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 user nginx; worker_processes auto; error_log /dev/null; pid /run/nginx.pid; include /usr/share/nginx/modules/*.conf; events { worker_connections 1024; } http { log_format main \u0026#39;$remote_addr - $remote_user [$time_local] \u0026#34;$request\u0026#34; \u0026#39; \u0026#39;$status $body_bytes_sent \u0026#34;$http_referer\u0026#34; \u0026#39; \u0026#39;\u0026#34;$http_user_agent\u0026#34; \u0026#34;$http_x_forwarded_for\u0026#34;\u0026#39;; access_log off; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; include /etc/nginx/conf.d/*.conf; server { listen 80 default_server; listen [::]:80 default_server; server_name example.cc www.example.cc; root /www/root; index index.html index.htm; location / { } } } # å¯åŠ¨ Nginx æœåŠ¡ 1 2 systemctl enable nginx systemctl start nginx ç„¶åæŸ¥çœ‹ä¸‹è¿è¡ŒçŠ¶æ€æ˜¯å¦å·²ç»æ­£å¸¸å¯åŠ¨ï¼Œçœ‹åˆ°runningå³æ˜¯æ­£å¸¸ã€‚\n1 2 3 4 $ systemctl status nginx â— nginx.service - The nginx HTTP and reverse proxy server Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled) Active: active (running) since Wed 2018-11-14 11:22:53 CST; 4 days ago ç„¶åæ‰“å¼€æµè§ˆå™¨è®¿é—®www.example.ccå’Œexample.ccçœ‹æ˜¯å¦èƒ½æ‰“å¼€è…¾è®¯å…¬ç›Š 404 é¡µé¢ã€‚èƒ½æ‰“å¼€è¯´æ˜ Nginx å·²ç»æ­£ç¡®é…ç½®ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹ç”³è¯· SSL è¯ä¹¦äº†ã€‚\n# å®‰è£… V2Ray å…·ä½“å‚è€ƒV2Ray å®˜æ–¹æ–‡æ¡£ï¼š\n1 bash \u0026lt;(curl -L -s https://install.direct/go.sh) å®‰è£…å®Œæˆåè‡ªåŠ¨å¯åŠ¨ï¼Œè¿™é‡Œå…ˆæŠŠå®ƒç»™åœäº†\n1 systemctl stop v2ray # ç”³è¯· Let\u0026rsquo;s Encrypt çš„ SSL è¯ä¹¦ Let\u0026rsquo;s Encrypt æœ‰å¾ˆå¤š ACME å®¢æˆ·ç«¯çš„å®ç°ã€‚è¿™é‡Œé€‰ç”¨acme.shã€‚\n# å®‰è£… acme.sh å®‰è£…å¾ˆç®€å•ï¼Œä¸€ä¸ªå‘½ä»¤ï¼š\n1 curl https://get.acme.sh | sh å®‰è£…å®Œæˆåæ‰§è¡Œä¸‹\n1 source /root/.bashrc # ç”³è¯·è¯ä¹¦ å¾ˆç®€å•ï¼Œä¸€ä¹Ÿæ˜¯å‘½ä»¤ï¼š\n1 acme.sh --issue -d example.cc -d www.example.cc --webroot /www/root/ -k ec-256 ä½¿ç”¨ ec-256 è¯ä¹¦ï¼Œè®©é€šä¿¡æ›´å®‰å…¨å§ã€‚\n# å°†è¯ä¹¦å®‰è£…åˆ°ç›®å½• è¿™é‡Œå°†è¯ä¹¦æ”¾åˆ°/etx/v2rayç›®å½•ä¸‹ã€‚\n1 acme.sh --installcert -d example.cc -d www.example.cc --key-file /etc/v2ray/v2ray.key --fullchain-file /etc/v2ray/v2ray.crt --ecc --reloadcmd \u0026#34;service nginx force-reload \u0026amp;\u0026amp; systemctl restart v2ray\u0026#34; è¿™è¡Œå‘½ä»¤é™¤äº†å°†è¯ä¹¦æ”¾åˆ°æŒ‡å®šç›®å½•ä¸‹å¤–ï¼Œè¿˜ä¼šè‡ªåŠ¨åˆ›å»º crontab å®šæ—¶ä»»åŠ¡ï¼Œåé¢å¼•å·é‡Œçš„å‘½ä»¤æ˜¯å®šæ—¶ä»»åŠ¡æ›´æ–°è¯ä¹¦åæ‰§è¡Œçš„å‘½ä»¤ã€‚\n# é…ç½® Nginx æ”¯æŒ Https è®¿é—® ä¸åºŸè¯äº†ï¼Œç›´æ¥ä¿®æ”¹/etc/nginx/nginx.confï¼Œå®Œæ•´é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 user nginx; worker_processes auto; error_log /dev/null; pid /run/nginx.pid; include /usr/share/nginx/modules/*.conf; events { worker_connections 1024; } http { log_format main \u0026#39;$remote_addr - $remote_user [$time_local] \u0026#34;$request\u0026#34; \u0026#39; \u0026#39;$status $body_bytes_sent \u0026#34;$http_referer\u0026#34; \u0026#39; \u0026#39;\u0026#34;$http_user_agent\u0026#34; \u0026#34;$http_x_forwarded_for\u0026#34;\u0026#39;; access_log off; server_tokens off; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; include /etc/nginx/conf.d/*.conf; # Http Serverï¼Œå¼ºåˆ¶è·³è½¬Https server { listen 80 default_server; listen [::]:80 default_server; server_name example.cc www.example.cc; rewrite ^(.*)$ https://www.example.cc$1 permanent; } # Https Server server { listen 443 ssl http2 default_server; listen [::]:443 ssl http2 default_server; server_name www.example.cc; root /www/root; index index.html index.htm; ssl_certificate \u0026#34;/etc/v2ray/v2ray.crt\u0026#34;; ssl_certificate_key \u0026#34;/etc/v2ray/v2ray.key\u0026#34;; ssl_session_cache shared:SSL:1m; ssl_session_timeout 10m; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; include /etc/nginx/default.d/*.conf; location / { } # åå‘ä»£ç†V2Ray location /wss { proxy_redirect off; proxy_pass http://127.0.0.1:10443; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#34;upgrade\u0026#34;; proxy_set_header Host $http_host; } error_page 404 /404.html; location = /40x.html { } error_page 500 502 503 504 /50x.html; location = /50x.html { } } } é…ç½®å®Œä¹‹åé‡æ–°å¯åŠ¨ Nginx\n1 systemctl restart nginx è®¿é—®www.example.ccå’Œexample.ccï¼Œå¦‚æœè‡ªåŠ¨è·³è½¬https://www.example.ccå¹¶ä¸”æ­£ç¡®æ˜¾ç¤ºå…¬ç›Š 404 åˆ™å·²ç»é…ç½®æ­£ç¡®ã€‚\n# é…ç½® V2Ray å¹¶å¯åŠ¨ å‰ç½®çš„æ‰€æœ‰æœåŠ¡éƒ½å·²ç»é…ç½®å®Œæ¯•ï¼Œåªå·®æœ€åçš„ V2Ray äº†ã€‚\n# ä¸º V2Ray ç”Ÿæˆä¸€ä¸ª UUID ä½¿ç”¨ V2Ray è‡ªå¸¦çš„v2ctlå·¥å…·ç”Ÿæˆä¸€ä¸ªæ–°çš„ uuidã€‚\n1 2 $ /usr/bin/v2ray/v2ctl uuid 27e0efcc-8e13-fef1-9e82-febebc469b2b è®°å½•ä¸‹æ­¤ uuid\n# ä¸º mtproto ç”Ÿæˆä¸€ä¸ªå¯†é’¥ ä½¿ç”¨ linux ç³»ç»Ÿåˆ›å»ºä¼ªéšæœºæ•°ä½œä¸ºå¯†é’¥ã€‚\n1 2 $ head -c 16 /dev/urandom | xxd -ps 80e2e037610bac1444ac02979364f666 è®°å½•ä¸‹æ­¤éšæœºæ•°\n# ä¿®æ”¹/etc/v2ray/config.json åŒæ ·çš„ï¼Œæ²¡æŠŠæ¡ç”¨ vim ä¿®æ”¹çš„ï¼Œå°±æ‹·è´ä¸‹æ¥åœ¨ VSCode é‡Œä¿®æ”¹ï¼Œæ”¹å®Œå†ä¼ å›æœåŠ¡å™¨ã€‚\nå°†åˆšç”Ÿæˆçš„ uuid å’Œéšæœºæ•°å¡«å…¥å¯¹åº”çš„ä½ç½®ã€‚\nå®Œæ•´é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 { \u0026#34;log\u0026#34;: { \u0026#34;loglevel\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;access\u0026#34;: \u0026#34;/var/log/v2ray/access.log\u0026#34;, \u0026#34;error\u0026#34;: \u0026#34;/var/log/v2ray/error.log\u0026#34; }, \u0026#34;inbounds\u0026#34;: [ { \u0026#34;port\u0026#34;: 10443, \u0026#34;listen\u0026#34;: \u0026#34;127.0.0.1\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;vmess\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;clients\u0026#34;: [ { \u0026#34;id\u0026#34;: \u0026#34;27e0efcc-8e13-fef1-9e82-febebc469b2b\u0026#34;, \u0026#34;alterId\u0026#34;: 64 } ] }, \u0026#34;streamSettings\u0026#34;: { \u0026#34;network\u0026#34;: \u0026#34;ws\u0026#34;, \u0026#34;wsSettings\u0026#34;: { \u0026#34;path\u0026#34;: \u0026#34;/wss\u0026#34; } } }, { \u0026#34;tag\u0026#34;: \u0026#34;tg-in\u0026#34;, \u0026#34;port\u0026#34;: 8080, \u0026#34;protocol\u0026#34;: \u0026#34;mtproto\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;users\u0026#34;: [ { \u0026#34;secret\u0026#34;: \u0026#34;80e2e037610bac1444ac02979364f666\u0026#34; } ] } } ], \u0026#34;outbounds\u0026#34;: [ { \u0026#34;protocol\u0026#34;: \u0026#34;freedom\u0026#34;, \u0026#34;settings\u0026#34;: {} }, { \u0026#34;protocol\u0026#34;: \u0026#34;blackhole\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;response\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;none\u0026#34; } }, \u0026#34;tag\u0026#34;: \u0026#34;blocked\u0026#34; }, { \u0026#34;tag\u0026#34;: \u0026#34;tg-out\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;mtproto\u0026#34;, \u0026#34;settings\u0026#34;: {} } ], \u0026#34;routing\u0026#34;: { \u0026#34;domainStrategy\u0026#34;: \u0026#34;IPOnDemand\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;rules\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;ip\u0026#34;: [\u0026#34;geoip:private\u0026#34;], \u0026#34;outboundTag\u0026#34;: \u0026#34;blocked\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;inboundTag\u0026#34;: [\u0026#34;tg-in\u0026#34;], \u0026#34;outboundTag\u0026#34;: \u0026#34;tg-out\u0026#34; } ] } } } #####ã€€å¯åŠ¨ V2Ray\nå¼€å¯å¼€æœºå¯åŠ¨å¹¶å¯åŠ¨ã€‚\n1 2 systemctl enable v2ray systemctl start v2ray å¯åŠ¨ä¹‹åæŸ¥çœ‹ä¸‹è¿è¡ŒçŠ¶æ€ï¼Œçœ‹æ˜¯å¦æ­£å¸¸è¿è¡Œ\n1 2 3 4 5 6 7 $systemctl status v2ray â— v2ray.service - V2Ray Service Loaded: loaded (/etc/systemd/system/v2ray.service; enabled; vendor preset: disabled) Active: active (running) since Sun 2018-11-18 17:00:07 CST; 3h 26min ago Main PID: 8908 (v2ray) CGroup: /system.slice/v2ray.service â””â”€8908 /usr/bin/v2ray/v2ray -config /etc/v2ray/config.json # å®¢æˆ·ç«¯é…ç½® å®¢æˆ·ç«¯é…ç½®ä¸å°½ç›¸åŒï¼Œå¯¹åº”å®¢æˆ·ç«¯è¯¦ç»†é…ç½®å¯ä»¥è‡ªå·±ç™¾åº¦ã€‚\nè¿™é‡Œç”¨æ–‡å­—æè¿°ä¸‹å¤§è‡´çš„é…ç½®æ­¥éª¤ï¼š\nåè®®ç±»å‹é€‰æ‹©Vmessï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ åœ°å€å¡«www.example.ccï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ ç«¯å£å¡«443ï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ UUID å¡«27e0efcc-8e13-fef1-9e82-febebc469b2bï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ ä¼ è¾“åè®®é€‰æ‹©wsï¼Œè·¯å¾„å¡«å†™/wssï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ å¼€å¯ TLS AlterId å¡«å†™64ï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ # IOS å®¢æˆ·ç«¯ IOS ä¸‹çš„ VPN ç±»å®¢æˆ·ç«¯åœ¨å›½åŒºåŸºæœ¬ä¸‹æ¶ä¸‹å®Œäº†ï¼ŒV2Ray æ¨èä½¿ç”¨ Kitsunebi çš„ TestFlight ç‰ˆæœ¬ã€‚\nåœ¨æ‰‹æœºä¸Šå®‰è£… TestFlight Appï¼šhttps://itunes.apple.com/us/app/testflight/id899247664?mt=8 åœ¨æ‰‹æœºä¸Šæ‰“å¼€è¿™ä¸ªé“¾æ¥è‡ªåŠ¨åŠ å…¥ TestFlightï¼šhttps://testflight.apple.com/join/2w6EF67u \u0026ndash;\u0026gt;åŸæ–‡åœ°å€\n# å…¶å®ƒ å…¶å®ƒå®¢æˆ·ç«¯è¯·å‚è€ƒï¼š Windows Android Mac OS X\n# æœ€åæä¾›ä¸¤ä»½å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ æ— éœ€æ±‚çš„ä»¥ä¸‹å°±å¯ä»¥ä¸çœ‹äº†ã€‚\n# PC ç”¨çš„æ”¯æŒå›½å†…å¤–åˆ†æµ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 { \u0026#34;inbounds\u0026#34;: [ { \u0026#34;port\u0026#34;: 1087, \u0026#34;listen\u0026#34;: \u0026#34;127.0.0.1\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;http\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;allowTransparent\u0026#34;: true } }, { \u0026#34;port\u0026#34;: 1086, \u0026#34;listen\u0026#34;: \u0026#34;127.0.0.1\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;socks\u0026#34;, \u0026#34;domainOverride\u0026#34;: [\u0026#34;tls\u0026#34;, \u0026#34;http\u0026#34;], \u0026#34;settings\u0026#34;: { \u0026#34;auth\u0026#34;: \u0026#34;noauth\u0026#34;, \u0026#34;udp\u0026#34;: true } } ], \u0026#34;outbounds\u0026#34;: [ { \u0026#34;protocol\u0026#34;: \u0026#34;vmess\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;vnext\u0026#34;: [ { \u0026#34;address\u0026#34;: \u0026#34;www.example.cc\u0026#34;, \u0026#34;port\u0026#34;: 443, \u0026#34;users\u0026#34;: [ { \u0026#34;id\u0026#34;: \u0026#34;27e0efcc-8e13-fef1-9e82-febebc469b2b\u0026#34;, \u0026#34;alterId\u0026#34;: 64, \u0026#34;security\u0026#34;: \u0026#34;auto\u0026#34; } ] } ] }, \u0026#34;streamSettings\u0026#34;: { \u0026#34;network\u0026#34;: \u0026#34;ws\u0026#34;, \u0026#34;wsSettings\u0026#34;: { \u0026#34;path\u0026#34;: \u0026#34;/wss\u0026#34; }, \u0026#34;security\u0026#34;: \u0026#34;tls\u0026#34; }, \u0026#34;mux\u0026#34;: { \u0026#34;enabled\u0026#34;: false, \u0026#34;concurrency\u0026#34;: 8 }, \u0026#34;tag\u0026#34;: \u0026#34;proxy\u0026#34; }, { \u0026#34;protocol\u0026#34;: \u0026#34;freedom\u0026#34;, \u0026#34;settings\u0026#34;: {}, \u0026#34;tag\u0026#34;: \u0026#34;direct\u0026#34; }, { \u0026#34;protocol\u0026#34;: \u0026#34;blackhole\u0026#34;, \u0026#34;settings\u0026#34;: {}, \u0026#34;tag\u0026#34;: \u0026#34;block\u0026#34; } ], \u0026#34;log\u0026#34;: { \u0026#34;loglevel\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;access\u0026#34;: \u0026#34;D:/v2ray_access.log\u0026#34;, \u0026#34;error\u0026#34;: \u0026#34;D:/v2ray_error.log\u0026#34; }, \u0026#34;dns\u0026#34;: { \u0026#34;hosts\u0026#34;: { \u0026#34;example.com\u0026#34;: \u0026#34;127.0.0.1\u0026#34; }, \u0026#34;servers\u0026#34;: [\u0026#34;223.5.5.5\u0026#34;, \u0026#34;8.8.8.8\u0026#34;, \u0026#34;localhost\u0026#34;] }, \u0026#34;routing\u0026#34;: { \u0026#34;strategy\u0026#34;: \u0026#34;rules\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;domainStrategy\u0026#34;: \u0026#34;IPIfNonMatch\u0026#34;, \u0026#34;rules\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;domain\u0026#34;: [ \u0026#34;dropbox\u0026#34;, \u0026#34;github\u0026#34;, \u0026#34;google\u0026#34;, \u0026#34;instagram\u0026#34;, \u0026#34;netflix\u0026#34;, \u0026#34;pinterest\u0026#34;, \u0026#34;pixiv\u0026#34;, \u0026#34;tumblr\u0026#34;, \u0026#34;twitter\u0026#34;, \u0026#34;domain:facebook.com\u0026#34;, \u0026#34;domain:fbcdn.net\u0026#34;, \u0026#34;domain:fivecdm.com\u0026#34;, \u0026#34;domain:ggpht.com\u0026#34;, \u0026#34;domain:gstatic.com\u0026#34;, \u0026#34;domain:line-scdn.net\u0026#34;, \u0026#34;domain:line.me\u0026#34;, \u0026#34;domain:medium.com\u0026#34;, \u0026#34;domain:naver.jp\u0026#34;, \u0026#34;domain:pximg.net\u0026#34;, \u0026#34;domain:t.co\u0026#34;, \u0026#34;domain:twimg.com\u0026#34;, \u0026#34;domain:youtube.com\u0026#34;, \u0026#34;domain:ytimg.com\u0026#34; ], \u0026#34;outboundTag\u0026#34;: \u0026#34;proxy\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;ip\u0026#34;: [ \u0026#34;125.209.222.0/24\u0026#34;, \u0026#34;149.154.167.0/24\u0026#34;, \u0026#34;149.154.175.0/24\u0026#34;, \u0026#34;91.108.56.0/24\u0026#34; ], \u0026#34;outboundTag\u0026#34;: \u0026#34;proxy\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;domain\u0026#34;: [ \u0026#34;cctv\u0026#34;, \u0026#34;geosite:cn\u0026#34;, \u0026#34;umeng\u0026#34;, \u0026#34;domain:apple.com\u0026#34;, \u0026#34;domain:crashlytics.com\u0026#34;, \u0026#34;domain:icloud.com\u0026#34;, \u0026#34;domain:ixigua.com\u0026#34;, \u0026#34;domain:pstatp.com\u0026#34;, \u0026#34;domain:snssdk.com\u0026#34;, \u0026#34;domain:toutiao.com\u0026#34; ], \u0026#34;outboundTag\u0026#34;: \u0026#34;direct\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;ip\u0026#34;: [\u0026#34;geoip:cn\u0026#34;, \u0026#34;geoip:private\u0026#34;], \u0026#34;outboundTag\u0026#34;: \u0026#34;direct\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;domain\u0026#34;: [\u0026#34;domain:doubleclick.net\u0026#34;], \u0026#34;outboundTag\u0026#34;: \u0026#34;block\u0026#34; } ] } } } # è·¯ç”±å™¨ç”¨çš„ï¼Œé€æ˜ä»£ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 { \u0026#34;inbounds\u0026#34;: [ { \u0026#34;port\u0026#34;: 7070, \u0026#34;protocol\u0026#34;: \u0026#34;dokodemo-door\u0026#34;, \u0026#34;domainOverride\u0026#34;: [\u0026#34;tls\u0026#34;, \u0026#34;http\u0026#34;], \u0026#34;address\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;network\u0026#34;: \u0026#34;tcp,udp\u0026#34;, \u0026#34;timeout\u0026#34;: 30, \u0026#34;followRedirect\u0026#34;: true } } ], \u0026#34;outbounds\u0026#34;: [ { \u0026#34;protocol\u0026#34;: \u0026#34;vmess\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;vnext\u0026#34;: [ { \u0026#34;address\u0026#34;: \u0026#34;www.example.cc\u0026#34;, \u0026#34;port\u0026#34;: 443, \u0026#34;users\u0026#34;: [ { \u0026#34;id\u0026#34;: \u0026#34;27e0efcc-8e13-fef1-9e82-febebc469b2b\u0026#34;, \u0026#34;alterId\u0026#34;: 64, \u0026#34;security\u0026#34;: \u0026#34;auto\u0026#34; } ] } ] }, \u0026#34;streamSettings\u0026#34;: { \u0026#34;network\u0026#34;: \u0026#34;ws\u0026#34;, \u0026#34;wsSettings\u0026#34;: { \u0026#34;path\u0026#34;: \u0026#34;/wss\u0026#34; }, \u0026#34;security\u0026#34;: \u0026#34;tls\u0026#34; }, \u0026#34;mux\u0026#34;: { \u0026#34;enabled\u0026#34;: false } } ], \u0026#34;log\u0026#34;: { \u0026#34;loglevel\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;access\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;error\u0026#34;: \u0026#34;\u0026#34; }, \u0026#34;dns\u0026#34;: { \u0026#34;servers\u0026#34;: [\u0026#34;localhost\u0026#34;] } } ","date":"2018-11-18T13:32:58+08:00","image":"http://localhost:1313/p/2018/11/v2ray-tutorial/cover_hud03d4371e9ff889abb8d731e50f5e29e_5871_120x120_fill_box_smart1_3.png","permalink":"http://localhost:1313/p/2018/11/v2ray-tutorial/","title":"V2Ray4.x + Nginx + TLS + ws + MTProto è¯¦ç»†é…ç½®æ•™ç¨‹"}]